{
    "hints": {
        "post_upgrade()void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "get_block_seed(uint64)byte[32]": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "deposit()void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "withdraw(uint64)void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "get_bet_key(address,uint64,uint64,uint64)byte[56]": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "get_max_bet()uint64": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "spin(uint64,uint64,uint64)byte[56]": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "claim(byte[56])uint64": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "set_version(uint64,uint64)void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "approve_update(bool)void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "grant_upgrader(address)void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "transfer(address)void": {
            "call_config": {
                "no_op": "CALL"
            }
        }
    },
    "source": {
        "approval": "I3ByYWdtYSB2ZXJzaW9uIDEwCgpjb250cmFjdC5TbG90TWFjaGluZS5hcHByb3ZhbF9wcm9ncmFtOgogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGJueiBtYWluX2VudHJ5cG9pbnRAMgogICAgY2FsbHN1YiBfX2luaXRfXwoKbWFpbl9lbnRyeXBvaW50QDI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjY3CiAgICAvLyBjbGFzcyBTbG90TWFjaGluZShVcGdyYWRlYWJsZSk6CiAgICB0eG4gTnVtQXBwQXJncwogICAgYnogbWFpbl9iYXJlX3JvdXRpbmdAMTgKICAgIG1ldGhvZCAicG9zdF91cGdyYWRlKCl2b2lkIgogICAgbWV0aG9kICJnZXRfYmxvY2tfc2VlZCh1aW50NjQpYnl0ZVszMl0iCiAgICBtZXRob2QgImRlcG9zaXQoKXZvaWQiCiAgICBtZXRob2QgIndpdGhkcmF3KHVpbnQ2NCl2b2lkIgogICAgbWV0aG9kICJnZXRfYmV0X2tleShhZGRyZXNzLHVpbnQ2NCx1aW50NjQsdWludDY0KWJ5dGVbNTZdIgogICAgbWV0aG9kICJnZXRfbWF4X2JldCgpdWludDY0IgogICAgbWV0aG9kICJzcGluKHVpbnQ2NCx1aW50NjQsdWludDY0KWJ5dGVbNTZdIgogICAgbWV0aG9kICJjbGFpbShieXRlWzU2XSl1aW50NjQiCiAgICBtZXRob2QgInNldF92ZXJzaW9uKHVpbnQ2NCx1aW50NjQpdm9pZCIKICAgIG1ldGhvZCAiYXBwcm92ZV91cGRhdGUoYm9vbCl2b2lkIgogICAgbWV0aG9kICJncmFudF91cGdyYWRlcihhZGRyZXNzKXZvaWQiCiAgICBtZXRob2QgInRyYW5zZmVyKGFkZHJlc3Mpdm9pZCIKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDAKICAgIG1hdGNoIG1haW5fcG9zdF91cGdyYWRlX3JvdXRlQDQgbWFpbl9nZXRfYmxvY2tfc2VlZF9yb3V0ZUA1IG1haW5fZGVwb3NpdF9yb3V0ZUA2IG1haW5fd2l0aGRyYXdfcm91dGVANyBtYWluX2dldF9iZXRfa2V5X3JvdXRlQDggbWFpbl9nZXRfbWF4X2JldF9yb3V0ZUA5IG1haW5fc3Bpbl9yb3V0ZUAxMCBtYWluX2NsYWltX3JvdXRlQDExIG1haW5fc2V0X3ZlcnNpb25fcm91dGVAMTIgbWFpbl9hcHByb3ZlX3VwZGF0ZV9yb3V0ZUAxMyBtYWluX2dyYW50X3VwZ3JhZGVyX3JvdXRlQDE0IG1haW5fdHJhbnNmZXJfcm91dGVAMTUKICAgIGVyciAvLyByZWplY3QgdHJhbnNhY3Rpb24KCm1haW5fcG9zdF91cGdyYWRlX3JvdXRlQDQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEwMAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICBjYWxsc3ViIHBvc3RfdXBncmFkZQogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9nZXRfYmxvY2tfc2VlZF9yb3V0ZUA1OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMTUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2NwogICAgLy8gY2xhc3MgU2xvdE1hY2hpbmUoVXBncmFkZWFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMTUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgY2FsbHN1YiBnZXRfYmxvY2tfc2VlZAogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9kZXBvc2l0X3JvdXRlQDY6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEyMwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICBjYWxsc3ViIGRlcG9zaXQKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fd2l0aGRyYXdfcm91dGVANzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTMzCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjcKICAgIC8vIGNsYXNzIFNsb3RNYWNoaW5lKFVwZ3JhZGVhYmxlKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTMzCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgd2l0aGRyYXcKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ2V0X2JldF9rZXlfcm91dGVAODoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTQ5CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjcKICAgIC8vIGNsYXNzIFNsb3RNYWNoaW5lKFVwZ3JhZGVhYmxlKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDIKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDMKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTQ5CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgZ2V0X2JldF9rZXkKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ2V0X21heF9iZXRfcm91dGVAOToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjYzCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIGNhbGxzdWIgZ2V0X21heF9iZXQKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fc3Bpbl9yb3V0ZUAxMDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mjc5CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjcKICAgIC8vIGNsYXNzIFNsb3RNYWNoaW5lKFVwZ3JhZGVhYmxlKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDIKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mjc5CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgc3BpbgogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9jbGFpbV9yb3V0ZUAxMToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU5CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjcKICAgIC8vIGNsYXNzIFNsb3RNYWNoaW5lKFVwZ3JhZGVhYmxlKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU5CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgY2xhaW0KICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fc2V0X3ZlcnNpb25fcm91dGVAMTI6CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6ODMKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2NwogICAgLy8gY2xhc3MgU2xvdE1hY2hpbmUoVXBncmFkZWFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjgzCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgc2V0X3ZlcnNpb24KICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fYXBwcm92ZV91cGRhdGVfcm91dGVAMTM6CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTAxCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjcKICAgIC8vIGNsYXNzIFNsb3RNYWNoaW5lKFVwZ3JhZGVhYmxlKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weToxMDEKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgY2FsbHN1YiBhcHByb3ZlX3VwZGF0ZQogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9ncmFudF91cGdyYWRlcl9yb3V0ZUAxNDoKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weToxMDcKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2NwogICAgLy8gY2xhc3MgU2xvdE1hY2hpbmUoVXBncmFkZWFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjEwNwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIGdyYW50X3VwZ3JhZGVyCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX3RyYW5zZmVyX3JvdXRlQDE1OgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvYWNjZXNzL093bmFibGUvY29udHJhY3QucHk6MjIKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9iYXJlX3JvdXRpbmdAMTg6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjY3CiAgICAvLyBjbGFzcyBTbG90TWFjaGluZShVcGdyYWRlYWJsZSk6CiAgICBpbnQgMAogICAgaW50IDQKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIG1hdGNoIG1haW5fY3JlYXRlQDE5IG1haW5fb25fdXBkYXRlQDIwCiAgICBlcnIgLy8gcmVqZWN0IHRyYW5zYWN0aW9uCgptYWluX2NyZWF0ZUAxOToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjcKICAgIC8vIGNsYXNzIFNsb3RNYWNoaW5lKFVwZ3JhZGVhYmxlKToKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICAhCiAgICBhc3NlcnQgLy8gaXMgY3JlYXRpbmcKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fb25fdXBkYXRlQDIwOgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjkyCiAgICAvLyBAYXJjNC5iYXJlbWV0aG9kKGFsbG93X2FjdGlvbnM9WyJVcGRhdGVBcHBsaWNhdGlvbiJdKQogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTo5Mi05MwogICAgLy8gQGFyYzQuYmFyZW1ldGhvZChhbGxvd19hY3Rpb25zPVsiVXBkYXRlQXBwbGljYXRpb24iXSkKICAgIC8vIGRlZiBvbl91cGRhdGUoc2VsZikgLT4gTm9uZToKICAgIGNhbGxzdWIgb25fdXBkYXRlCiAgICBpbnQgMQogICAgcmV0dXJuCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUucG9zdF91cGdyYWRlKCkgLT4gdm9pZDoKcG9zdF91cGdyYWRlOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDAtMTAxCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBwb3N0X3VwZ3JhZGUoc2VsZikgLT4gTm9uZToKICAgIHByb3RvIDAgMAogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjMxCiAgICAvLyBzZWxmLmNvbnRyYWN0X3ZlcnNpb24gPSBVSW50NjQoKQogICAgYnl0ZSAiY29udHJhY3RfdmVyc2lvbiIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTA1CiAgICAvLyBzZWxmLmNvbnRyYWN0X3ZlcnNpb24gPSBVSW50NjQoQ09OVFJBQ1RfVkVSU0lPTikKICAgIGludCAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjMyCiAgICAvLyBzZWxmLmRlcGxveW1lbnRfdmVyc2lvbiA9IFVJbnQ2NCgpCiAgICBieXRlICJkZXBsb3ltZW50X3ZlcnNpb24iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEwNgogICAgLy8gc2VsZi5kZXBsb3ltZW50X3ZlcnNpb24gPSBVSW50NjQoREVQTE9ZTUVOVF9WRVJTSU9OKQogICAgaW50IDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5nZXRfYmxvY2tfc2VlZChyb3VuZDogYnl0ZXMpIC0+IGJ5dGVzOgpnZXRfYmxvY2tfc2VlZDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTE1LTExNgogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2Jsb2NrX3NlZWQoc2VsZiwgcm91bmQ6IGFyYzQuVUludDY0KSAtPiBCeXRlczMyOgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjExNwogICAgLy8gcmV0dXJuIEJ5dGVzMzIuZnJvbV9ieXRlcyhzZWxmLl9nZXRfYmxvY2tfc2VlZChyb3VuZC5uYXRpdmUpKQogICAgZnJhbWVfZGlnIC0xCiAgICBidG9pCiAgICBjYWxsc3ViIF9nZXRfYmxvY2tfc2VlZAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2dldF9ibG9ja19zZWVkKHJvdW5kOiB1aW50NjQpIC0+IGJ5dGVzOgpfZ2V0X2Jsb2NrX3NlZWQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjExOS0xMjAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9ibG9ja19zZWVkKHNlbGYsIHJvdW5kOiBVSW50NjQpIC0+IEJ5dGVzOgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEyMQogICAgLy8gcmV0dXJuIG9wLkJsb2NrLmJsa19zZWVkKHJvdW5kKVstMzI6XQogICAgZnJhbWVfZGlnIC0xCiAgICBibG9jayBCbGtTZWVkCiAgICBkdXAKICAgIGxlbgogICAgaW50IDMyCiAgICBkaWcgMQogICAgPj0KICAgIGludCAzMgogICAgZGlnIDIKICAgIHVuY292ZXIgMgogICAgc2VsZWN0CiAgICBkaWcgMQogICAgc3dhcAogICAgLQogICAgc3dhcAogICAgc3Vic3RyaW5nMwogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuZGVwb3NpdCgpIC0+IHZvaWQ6CmRlcG9zaXQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEyMy0xMjQKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGRlcG9zaXQoc2VsZikgLT4gTm9uZToKICAgIHByb3RvIDAgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMjgKICAgIC8vIHBheW1lbnQgPSByZXF1aXJlX3BheW1lbnQoVHhuLnNlbmRlcikKICAgIHR4biBTZW5kZXIKICAgIGNhbGxzdWIgcmVxdWlyZV9wYXltZW50CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEyOQogICAgLy8gYXNzZXJ0IHBheW1lbnQgPiAwLCAicGF5bWVudCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwIgogICAgZHVwCiAgICBhc3NlcnQgLy8gcGF5bWVudCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEzMAogICAgLy8gc2VsZi5iYWxhbmNlX3RvdGFsICs9IHBheW1lbnQKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjgwLTgxCiAgICAvLyAjIHNsb3QgbWFjaGluZSBzdGF0ZQogICAgLy8gc2VsZi5iYWxhbmNlX3RvdGFsID0gVUludDY0KCkKICAgIGJ5dGUgImJhbGFuY2VfdG90YWwiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEzMAogICAgLy8gc2VsZi5iYWxhbmNlX3RvdGFsICs9IHBheW1lbnQKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5iYWxhbmNlX3RvdGFsIGV4aXN0cwogICAgZGlnIDEKICAgICsKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODAtODEKICAgIC8vICMgc2xvdCBtYWNoaW5lIHN0YXRlCiAgICAvLyBzZWxmLmJhbGFuY2VfdG90YWwgPSBVSW50NjQoKQogICAgYnl0ZSAiYmFsYW5jZV90b3RhbCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTMwCiAgICAvLyBzZWxmLmJhbGFuY2VfdG90YWwgKz0gcGF5bWVudAogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTMxCiAgICAvLyBzZWxmLmJhbGFuY2VfYXZhaWxhYmxlICs9IHBheW1lbnQKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjgyCiAgICAvLyBzZWxmLmJhbGFuY2VfYXZhaWxhYmxlID0gVUludDY0KCkKICAgIGJ5dGUgImJhbGFuY2VfYXZhaWxhYmxlIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMzEKICAgIC8vIHNlbGYuYmFsYW5jZV9hdmFpbGFibGUgKz0gcGF5bWVudAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLmJhbGFuY2VfYXZhaWxhYmxlIGV4aXN0cwogICAgKwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4MgogICAgLy8gc2VsZi5iYWxhbmNlX2F2YWlsYWJsZSA9IFVJbnQ2NCgpCiAgICBieXRlICJiYWxhbmNlX2F2YWlsYWJsZSIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTMxCiAgICAvLyBzZWxmLmJhbGFuY2VfYXZhaWxhYmxlICs9IHBheW1lbnQKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICByZXRzdWIKCgovLyBvcGVuc3VibWFyaW5lLnV0aWxzLmFsZ29yYW5kLnJlcXVpcmVfcGF5bWVudCh3aG86IGJ5dGVzKSAtPiB1aW50NjQ6CnJlcXVpcmVfcGF5bWVudDoKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvdXRpbHMvYWxnb3JhbmQucHk6MTUtMjMKICAgIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vICMgZnVuY3Rpb246IHJlcXVpcmVfcGF5bWVudCAoaW50ZXJuYWwpCiAgICAvLyAjIGFyZ3VtZW50czogTm9uZQogICAgLy8gIyBwdXJwb3NlOiBjaGVjayBwYXltZW50CiAgICAvLyAjIHByZS1jb25kaXRpb25zOiBOb25lCiAgICAvLyAjIHBvc3QtY29uZGl0aW9uczogTm9uZQogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiByZXF1aXJlX3BheW1lbnQod2hvOiBBY2NvdW50KSAtPiBVSW50NjQ6CiAgICBwcm90byAxIDEKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvdXRpbHMvYWxnb3JhbmQucHk6MjQKICAgIC8vIHJlZl9ncm91cF9pbmRleCA9IFR4bi5ncm91cF9pbmRleAogICAgdHhuIEdyb3VwSW5kZXgKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvdXRpbHMvYWxnb3JhbmQucHk6MjUKICAgIC8vIGFzc2VydCByZWZfZ3JvdXBfaW5kZXggPiAwLCAiZ3JvdXAgaW5kZXggZ3JlYXRlciB0aGFuIHplcm8iCiAgICBkdXAKICAgIGFzc2VydCAvLyBncm91cCBpbmRleCBncmVhdGVyIHRoYW4gemVybwogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS91dGlscy9hbGdvcmFuZC5weToyNgogICAgLy8gcGF5bWVudF9ncm91cF9pbmRleCA9IHJlZl9ncm91cF9pbmRleCAtIDEKICAgIGludCAxCiAgICAtCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL3V0aWxzL2FsZ29yYW5kLnB5OjI4CiAgICAvLyBndHhuLlBheW1lbnRUcmFuc2FjdGlvbihwYXltZW50X2dyb3VwX2luZGV4KS5zZW5kZXIgPT0gd2hvCiAgICBkdXAKICAgIGd0eG5zIFR5cGVFbnVtCiAgICBpbnQgcGF5CiAgICA9PQogICAgYXNzZXJ0IC8vIHRyYW5zYWN0aW9uIHR5cGUgaXMgcGF5CiAgICBkdXAKICAgIGd0eG5zIFNlbmRlcgogICAgZnJhbWVfZGlnIC0xCiAgICA9PQogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS91dGlscy9hbGdvcmFuZC5weToyNy0yOQogICAgLy8gYXNzZXJ0ICgKICAgIC8vICAgICBndHhuLlBheW1lbnRUcmFuc2FjdGlvbihwYXltZW50X2dyb3VwX2luZGV4KS5zZW5kZXIgPT0gd2hvCiAgICAvLyApLCAicGF5bWVudCBzZW5kZXIgYWNjdXJhdGUiCiAgICBhc3NlcnQgLy8gcGF5bWVudCBzZW5kZXIgYWNjdXJhdGUKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvdXRpbHMvYWxnb3JhbmQucHk6MzEKICAgIC8vIGd0eG4uUGF5bWVudFRyYW5zYWN0aW9uKHBheW1lbnRfZ3JvdXBfaW5kZXgpLnJlY2VpdmVyCiAgICBkdXAKICAgIGd0eG5zIFJlY2VpdmVyCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL3V0aWxzL2FsZ29yYW5kLnB5OjMyCiAgICAvLyA9PSBHbG9iYWwuY3VycmVudF9hcHBsaWNhdGlvbl9hZGRyZXNzCiAgICBnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS91dGlscy9hbGdvcmFuZC5weTozMS0zMgogICAgLy8gZ3R4bi5QYXltZW50VHJhbnNhY3Rpb24ocGF5bWVudF9ncm91cF9pbmRleCkucmVjZWl2ZXIKICAgIC8vID09IEdsb2JhbC5jdXJyZW50X2FwcGxpY2F0aW9uX2FkZHJlc3MKICAgID09CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL3V0aWxzL2FsZ29yYW5kLnB5OjMwLTMzCiAgICAvLyBhc3NlcnQgKAogICAgLy8gICAgIGd0eG4uUGF5bWVudFRyYW5zYWN0aW9uKHBheW1lbnRfZ3JvdXBfaW5kZXgpLnJlY2VpdmVyCiAgICAvLyAgICAgPT0gR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcwogICAgLy8gKSwgInBheW1lbnQgcmVjZWl2ZXIgYWNjdXJhdGUiCiAgICBhc3NlcnQgLy8gcGF5bWVudCByZWNlaXZlciBhY2N1cmF0ZQogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS91dGlscy9hbGdvcmFuZC5weTozNAogICAgLy8gcmV0dXJuIGd0eG4uUGF5bWVudFRyYW5zYWN0aW9uKHBheW1lbnRfZ3JvdXBfaW5kZXgpLmFtb3VudAogICAgZ3R4bnMgQW1vdW50CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS53aXRoZHJhdyhhbW91bnQ6IGJ5dGVzKSAtPiB2b2lkOgp3aXRoZHJhdzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTMzLTEzNAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgd2l0aGRyYXcoc2VsZiwgYW1vdW50OiBhcmM0LlVJbnQ2NCkgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNDIKICAgIC8vIHNlbGYub25seV9vd25lcigpCiAgICBjYWxsc3ViIG9ubHlfb3duZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTQzCiAgICAvLyBhc3NlcnQgYW1vdW50Lm5hdGl2ZSA+IFVJbnQ2NCgwKSwgImFtb3VudCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwIgogICAgZnJhbWVfZGlnIC0xCiAgICBidG9pCiAgICBkdXAKICAgIGFzc2VydCAvLyBhbW91bnQgbXVzdCBiZSBncmVhdGVyIHRoYW4gMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNDQKICAgIC8vIGFzc2VydCBhbW91bnQubmF0aXZlIDw9IHNlbGYuYmFsYW5jZV9hdmFpbGFibGUsICJpbnN1ZmZpY2llbnQgYmFsYW5jZSIKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjgyCiAgICAvLyBzZWxmLmJhbGFuY2VfYXZhaWxhYmxlID0gVUludDY0KCkKICAgIGJ5dGUgImJhbGFuY2VfYXZhaWxhYmxlIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNDQKICAgIC8vIGFzc2VydCBhbW91bnQubmF0aXZlIDw9IHNlbGYuYmFsYW5jZV9hdmFpbGFibGUsICJpbnN1ZmZpY2llbnQgYmFsYW5jZSIKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5iYWxhbmNlX2F2YWlsYWJsZSBleGlzdHMKICAgIGRpZyAxCiAgICA+PQogICAgYXNzZXJ0IC8vIGluc3VmZmljaWVudCBiYWxhbmNlCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE0NQogICAgLy8gaXR4bi5QYXltZW50KHJlY2VpdmVyPVR4bi5zZW5kZXIsIGFtb3VudD1hbW91bnQubmF0aXZlKS5zdWJtaXQoKQogICAgaXR4bl9iZWdpbgogICAgdHhuIFNlbmRlcgogICAgZGlnIDEKICAgIGl0eG5fZmllbGQgQW1vdW50CiAgICBpdHhuX2ZpZWxkIFJlY2VpdmVyCiAgICBpbnQgcGF5CiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICBpbnQgMAogICAgaXR4bl9maWVsZCBGZWUKICAgIGl0eG5fc3VibWl0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE0NgogICAgLy8gc2VsZi5iYWxhbmNlX2F2YWlsYWJsZSAtPSBhbW91bnQubmF0aXZlCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4MgogICAgLy8gc2VsZi5iYWxhbmNlX2F2YWlsYWJsZSA9IFVJbnQ2NCgpCiAgICBieXRlICJiYWxhbmNlX2F2YWlsYWJsZSIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTQ2CiAgICAvLyBzZWxmLmJhbGFuY2VfYXZhaWxhYmxlIC09IGFtb3VudC5uYXRpdmUKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5iYWxhbmNlX2F2YWlsYWJsZSBleGlzdHMKICAgIGRpZyAxCiAgICAtCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjgyCiAgICAvLyBzZWxmLmJhbGFuY2VfYXZhaWxhYmxlID0gVUludDY0KCkKICAgIGJ5dGUgImJhbGFuY2VfYXZhaWxhYmxlIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNDYKICAgIC8vIHNlbGYuYmFsYW5jZV9hdmFpbGFibGUgLT0gYW1vdW50Lm5hdGl2ZQogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTQ3CiAgICAvLyBzZWxmLmJhbGFuY2VfdG90YWwgLT0gYW1vdW50Lm5hdGl2ZQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODAtODEKICAgIC8vICMgc2xvdCBtYWNoaW5lIHN0YXRlCiAgICAvLyBzZWxmLmJhbGFuY2VfdG90YWwgPSBVSW50NjQoKQogICAgYnl0ZSAiYmFsYW5jZV90b3RhbCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTQ3CiAgICAvLyBzZWxmLmJhbGFuY2VfdG90YWwgLT0gYW1vdW50Lm5hdGl2ZQogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLmJhbGFuY2VfdG90YWwgZXhpc3RzCiAgICBzd2FwCiAgICAtCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjgwLTgxCiAgICAvLyAjIHNsb3QgbWFjaGluZSBzdGF0ZQogICAgLy8gc2VsZi5iYWxhbmNlX3RvdGFsID0gVUludDY0KCkKICAgIGJ5dGUgImJhbGFuY2VfdG90YWwiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE0NwogICAgLy8gc2VsZi5iYWxhbmNlX3RvdGFsIC09IGFtb3VudC5uYXRpdmUKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5vbmx5X293bmVyKCkgLT4gdm9pZDoKb25seV9vd25lcjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTA4LTEwOQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBvbmx5X293bmVyKHNlbGYpIC0+IE5vbmU6CiAgICBwcm90byAwIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTEzCiAgICAvLyBhc3NlcnQgVHhuLnNlbmRlciA9PSBzZWxmLm93bmVyLCAib25seSBvd25lciBjYW4gY2FsbCB0aGlzIGZ1bmN0aW9uIgogICAgdHhuIFNlbmRlcgogICAgaW50IDAKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL2FjY2Vzcy9Pd25hYmxlL2NvbnRyYWN0LnB5OjIwCiAgICAvLyBzZWxmLm93bmVyID0gQWNjb3VudCgpCiAgICBieXRlICJvd25lciIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTEzCiAgICAvLyBhc3NlcnQgVHhuLnNlbmRlciA9PSBzZWxmLm93bmVyLCAib25seSBvd25lciBjYW4gY2FsbCB0aGlzIGZ1bmN0aW9uIgogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLm93bmVyIGV4aXN0cwogICAgPT0KICAgIGFzc2VydCAvLyBvbmx5IG93bmVyIGNhbiBjYWxsIHRoaXMgZnVuY3Rpb24KICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLmdldF9iZXRfa2V5KGFkZHJlc3M6IGJ5dGVzLCBhbW91bnQ6IGJ5dGVzLCByb3VuZDogYnl0ZXMsIGluZGV4OiBieXRlcykgLT4gYnl0ZXM6CmdldF9iZXRfa2V5OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNDktMTU2CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfYmV0X2tleSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIGFkZHJlc3M6IGFyYzQuQWRkcmVzcywKICAgIC8vICAgICBhbW91bnQ6IGFyYzQuVUludDY0LAogICAgLy8gICAgIHJvdW5kOiBhcmM0LlVJbnQ2NCwKICAgIC8vICAgICBpbmRleDogYXJjNC5VSW50NjQsCiAgICAvLyApIC0+IEJ5dGVzNTY6CiAgICBwcm90byA0IDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTU4CiAgICAvLyBzZWxmLl9nZXRfYmV0X2tleShhZGRyZXNzLm5hdGl2ZSwgYW1vdW50Lm5hdGl2ZSwgcm91bmQubmF0aXZlLCBpbmRleC5uYXRpdmUpCiAgICBmcmFtZV9kaWcgLTMKICAgIGJ0b2kKICAgIGZyYW1lX2RpZyAtMgogICAgYnRvaQogICAgZnJhbWVfZGlnIC0xCiAgICBidG9pCiAgICBmcmFtZV9kaWcgLTQKICAgIGNvdmVyIDMKICAgIGNhbGxzdWIgX2dldF9iZXRfa2V5CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE1Ny0xNTkKICAgIC8vIHJldHVybiBCeXRlczU2LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgc2VsZi5fZ2V0X2JldF9rZXkoYWRkcmVzcy5uYXRpdmUsIGFtb3VudC5uYXRpdmUsIHJvdW5kLm5hdGl2ZSwgaW5kZXgubmF0aXZlKQogICAgLy8gKQogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2dldF9iZXRfa2V5KGFkZHJlc3M6IGJ5dGVzLCBhbW91bnQ6IHVpbnQ2NCwgcm91bmQ6IHVpbnQ2NCwgaW5kZXg6IHVpbnQ2NCkgLT4gYnl0ZXM6Cl9nZXRfYmV0X2tleToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTYxLTE2NAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2JldF9rZXkoCiAgICAvLyAgICAgc2VsZiwgYWRkcmVzczogQWNjb3VudCwgYW1vdW50OiBVSW50NjQsIHJvdW5kOiBVSW50NjQsIGluZGV4OiBVSW50NjQKICAgIC8vICkgLT4gQnl0ZXM6CiAgICBwcm90byA0IDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTY3CiAgICAvLyArIGFyYzQuVUludDY0KGFtb3VudCkuYnl0ZXMKICAgIGZyYW1lX2RpZyAtMwogICAgaXRvYgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNjYtMTY3CiAgICAvLyBhcmM0LkFkZHJlc3MoYWRkcmVzcykuYnl0ZXMKICAgIC8vICsgYXJjNC5VSW50NjQoYW1vdW50KS5ieXRlcwogICAgZnJhbWVfZGlnIC00CiAgICBzd2FwCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTY4CiAgICAvLyArIGFyYzQuVUludDY0KHJvdW5kKS5ieXRlcwogICAgZnJhbWVfZGlnIC0yCiAgICBpdG9iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE2Ni0xNjgKICAgIC8vIGFyYzQuQWRkcmVzcyhhZGRyZXNzKS5ieXRlcwogICAgLy8gKyBhcmM0LlVJbnQ2NChhbW91bnQpLmJ5dGVzCiAgICAvLyArIGFyYzQuVUludDY0KHJvdW5kKS5ieXRlcwogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE2OQogICAgLy8gKyBhcmM0LlVJbnQ2NChpbmRleCkuYnl0ZXMKICAgIGZyYW1lX2RpZyAtMQogICAgaXRvYgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNjYtMTY5CiAgICAvLyBhcmM0LkFkZHJlc3MoYWRkcmVzcykuYnl0ZXMKICAgIC8vICsgYXJjNC5VSW50NjQoYW1vdW50KS5ieXRlcwogICAgLy8gKyBhcmM0LlVJbnQ2NChyb3VuZCkuYnl0ZXMKICAgIC8vICsgYXJjNC5VSW50NjQoaW5kZXgpLmJ5dGVzCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTY1LTE3MAogICAgLy8gcmV0dXJuICgKICAgIC8vICAgICBhcmM0LkFkZHJlc3MoYWRkcmVzcykuYnl0ZXMKICAgIC8vICAgICArIGFyYzQuVUludDY0KGFtb3VudCkuYnl0ZXMKICAgIC8vICAgICArIGFyYzQuVUludDY0KHJvdW5kKS5ieXRlcwogICAgLy8gICAgICsgYXJjNC5VSW50NjQoaW5kZXgpLmJ5dGVzCiAgICAvLyApCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5nZXRfbWF4X2JldCgpIC0+IGJ5dGVzOgpnZXRfbWF4X2JldDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjYzLTI2NAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X21heF9iZXQoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjY4CiAgICAvLyByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X21heF9iZXQoKSkKICAgIGNhbGxzdWIgX2dldF9tYXhfYmV0CiAgICBpdG9iCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZ2V0X21heF9iZXQoKSAtPiB1aW50NjQ6Cl9nZXRfbWF4X2JldDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjcwLTI3MQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X21heF9iZXQoc2VsZikgLT4gVUludDY0OgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI3Ni0yNzcKICAgIC8vICMgTWF4IGJldCA9IGF2YWlsYWJsZSBiYWxhbmNlIC8gbWF4IHBheW91dCAoMTAweCkKICAgIC8vIHJldHVybiBzZWxmLmJhbGFuY2VfYXZhaWxhYmxlIC8vIFVJbnQ2NCgxMDApCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4MgogICAgLy8gc2VsZi5iYWxhbmNlX2F2YWlsYWJsZSA9IFVJbnQ2NCgpCiAgICBieXRlICJiYWxhbmNlX2F2YWlsYWJsZSIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mjc2LTI3NwogICAgLy8gIyBNYXggYmV0ID0gYXZhaWxhYmxlIGJhbGFuY2UgLyBtYXggcGF5b3V0ICgxMDB4KQogICAgLy8gcmV0dXJuIHNlbGYuYmFsYW5jZV9hdmFpbGFibGUgLy8gVUludDY0KDEwMCkKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5iYWxhbmNlX2F2YWlsYWJsZSBleGlzdHMKICAgIGludCAxMDAKICAgIC8KICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLnNwaW4oYmV0X2Ftb3VudDogYnl0ZXMsIGluZGV4OiBieXRlcywgZnV0dXJlX3JvdW5kX29mZnNldDogYnl0ZXMpIC0+IGJ5dGVzOgpzcGluOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyNzktMjg1CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBzcGluKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgYmV0X2Ftb3VudDogYXJjNC5VSW50NjQsCiAgICAvLyAgICAgaW5kZXg6IGFyYzQuVUludDY0LAogICAgLy8gICAgIGZ1dHVyZV9yb3VuZF9vZmZzZXQ6IGFyYzQuVUludDY0LAogICAgLy8gKSAtPiBCeXRlczU2OgogICAgcHJvdG8gMyAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI5OAogICAgLy8gc2VsZi5fc3BpbihiZXRfYW1vdW50Lm5hdGl2ZSwgaW5kZXgubmF0aXZlLCBmdXR1cmVfcm91bmRfb2Zmc2V0Lm5hdGl2ZSkKICAgIGZyYW1lX2RpZyAtMwogICAgYnRvaQogICAgZnJhbWVfZGlnIC0yCiAgICBidG9pCiAgICBmcmFtZV9kaWcgLTEKICAgIGJ0b2kKICAgIGNhbGxzdWIgX3NwaW4KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mjk3LTI5OQogICAgLy8gcmV0dXJuIEJ5dGVzNTYuZnJvbV9ieXRlcygKICAgIC8vICAgICBzZWxmLl9zcGluKGJldF9hbW91bnQubmF0aXZlLCBpbmRleC5uYXRpdmUsIGZ1dHVyZV9yb3VuZF9vZmZzZXQubmF0aXZlKQogICAgLy8gKQogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX3NwaW4oYmV0X2Ftb3VudDogdWludDY0LCBpbmRleDogdWludDY0LCBmdXR1cmVfcm91bmRfb2Zmc2V0OiB1aW50NjQpIC0+IGJ5dGVzOgpfc3BpbjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzAxLTMwNAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfc3BpbigKICAgIC8vICAgICBzZWxmLCBiZXRfYW1vdW50OiBVSW50NjQsIGluZGV4OiBVSW50NjQsIGZ1dHVyZV9yb3VuZF9vZmZzZXQ6IFVJbnQ2NAogICAgLy8gKSAtPiBCeXRlczoKICAgIHByb3RvIDMgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMTYKICAgIC8vIGFzc2VydCBpbmRleCA8IFVJbnQ2NCgyNCksICJpbmRleCBtdXN0IGJlIGxlc3MgdGhhbiAyNCIKICAgIGZyYW1lX2RpZyAtMgogICAgaW50IDI0CiAgICA8CiAgICBhc3NlcnQgLy8gaW5kZXggbXVzdCBiZSBsZXNzIHRoYW4gMjQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzE3CiAgICAvLyBhc3NlcnQgYmV0X2Ftb3VudCA+PSBzZWxmLm1pbl9iZXRfYW1vdW50LCAiYmV0IGFtb3VudCB0b28gc21hbGwiCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4OQogICAgLy8gc2VsZi5taW5fYmV0X2Ftb3VudCA9IFVJbnQ2NCgxMDAwMDAwKSAgIyAxIFZPSQogICAgYnl0ZSAibWluX2JldF9hbW91bnQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMxNwogICAgLy8gYXNzZXJ0IGJldF9hbW91bnQgPj0gc2VsZi5taW5fYmV0X2Ftb3VudCwgImJldCBhbW91bnQgdG9vIHNtYWxsIgogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLm1pbl9iZXRfYW1vdW50IGV4aXN0cwogICAgZnJhbWVfZGlnIC0zCiAgICA8PQogICAgYXNzZXJ0IC8vIGJldCBhbW91bnQgdG9vIHNtYWxsCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMxOAogICAgLy8gbWF4X2JldCA9IHNlbGYuX2dldF9tYXhfYmV0KCkKICAgIGNhbGxzdWIgX2dldF9tYXhfYmV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMxOQogICAgLy8gYXNzZXJ0IGJldF9hbW91bnQgPD0gbWF4X2JldCwgImJldCBhbW91bnQgdG9vIGxhcmdlIgogICAgZnJhbWVfZGlnIC0zCiAgICA+PQogICAgYXNzZXJ0IC8vIGJldCBhbW91bnQgdG9vIGxhcmdlCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMyMAogICAgLy8gcGF5bWVudCA9IHJlcXVpcmVfcGF5bWVudChUeG4uc2VuZGVyKQogICAgdHhuIFNlbmRlcgogICAgY2FsbHN1YiByZXF1aXJlX3BheW1lbnQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzIxCiAgICAvLyBhc3NlcnQgcGF5bWVudCA+PSBiZXRfYW1vdW50LCAicGF5bWVudCBpbnN1ZmZpY2llbnQiCiAgICBkdXAKICAgIGZyYW1lX2RpZyAtMwogICAgPj0KICAgIGFzc2VydCAvLyBwYXltZW50IGluc3VmZmljaWVudAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMjIKICAgIC8vIGV4dHJhX3BheW1lbnQgPSBwYXltZW50IC0gYmV0X2Ftb3VudAogICAgZnJhbWVfZGlnIC0zCiAgICAtCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMyNAogICAgLy8gZXh0cmFfcGF5bWVudCA+PSBCT1hfQ09TVF9CRVQKICAgIGR1cAogICAgaW50IDM3NzAwCiAgICA+PQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMjMtMzI1CiAgICAvLyBhc3NlcnQgKAogICAgLy8gICAgIGV4dHJhX3BheW1lbnQgPj0gQk9YX0NPU1RfQkVUCiAgICAvLyApLCAiZXh0cmEgcGF5bWVudCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBib3ggY29zdCIKICAgIGFzc2VydCAvLyBleHRyYSBwYXltZW50IG11c3QgYmUgZ3JlYXRlciB0aGFuIGJveCBjb3N0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMyNwogICAgLy8gZXh0cmFfcGF5bWVudCA8PSBNQVhfRVhUUkFfUEFZTUVOVAogICAgaW50IDEwMDAwMDAwMDAwMDAwMDAwMDAKICAgIDw9CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMyNi0zMjgKICAgIC8vIGFzc2VydCAoCiAgICAvLyAgICAgZXh0cmFfcGF5bWVudCA8PSBNQVhfRVhUUkFfUEFZTUVOVAogICAgLy8gKSwgImV4dHJhIHBheW1lbnQgbXVzdCBiZSBsZXNzIHRoYW4gbWF4IGV4dHJhIHBheW1lbnQiCiAgICBhc3NlcnQgLy8gZXh0cmEgcGF5bWVudCBtdXN0IGJlIGxlc3MgdGhhbiBtYXggZXh0cmEgcGF5bWVudAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMzAtMzMxCiAgICAvLyAjIFVwZGF0ZSBiYWxhbmNlIHRyYWNraW5nCiAgICAvLyBzZWxmLmJhbGFuY2VfdG90YWwgKz0gYmV0X2Ftb3VudAogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODAtODEKICAgIC8vICMgc2xvdCBtYWNoaW5lIHN0YXRlCiAgICAvLyBzZWxmLmJhbGFuY2VfdG90YWwgPSBVSW50NjQoKQogICAgYnl0ZSAiYmFsYW5jZV90b3RhbCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzMwLTMzMQogICAgLy8gIyBVcGRhdGUgYmFsYW5jZSB0cmFja2luZwogICAgLy8gc2VsZi5iYWxhbmNlX3RvdGFsICs9IGJldF9hbW91bnQKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5iYWxhbmNlX3RvdGFsIGV4aXN0cwogICAgZnJhbWVfZGlnIC0zCiAgICArCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjgwLTgxCiAgICAvLyAjIHNsb3QgbWFjaGluZSBzdGF0ZQogICAgLy8gc2VsZi5iYWxhbmNlX3RvdGFsID0gVUludDY0KCkKICAgIGJ5dGUgImJhbGFuY2VfdG90YWwiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMzMC0zMzEKICAgIC8vICMgVXBkYXRlIGJhbGFuY2UgdHJhY2tpbmcKICAgIC8vIHNlbGYuYmFsYW5jZV90b3RhbCArPSBiZXRfYW1vdW50CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMzIKICAgIC8vIHNlbGYuYmFsYW5jZV9hdmFpbGFibGUgKz0gYmV0X2Ftb3VudCAgIyBBZGQgYmV0IGFtb3VudCB0byBhdmFpbGFibGUgZmlyc3QKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjgyCiAgICAvLyBzZWxmLmJhbGFuY2VfYXZhaWxhYmxlID0gVUludDY0KCkKICAgIGJ5dGUgImJhbGFuY2VfYXZhaWxhYmxlIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMzIKICAgIC8vIHNlbGYuYmFsYW5jZV9hdmFpbGFibGUgKz0gYmV0X2Ftb3VudCAgIyBBZGQgYmV0IGFtb3VudCB0byBhdmFpbGFibGUgZmlyc3QKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5iYWxhbmNlX2F2YWlsYWJsZSBleGlzdHMKICAgIGZyYW1lX2RpZyAtMwogICAgKwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4MgogICAgLy8gc2VsZi5iYWxhbmNlX2F2YWlsYWJsZSA9IFVJbnQ2NCgpCiAgICBieXRlICJiYWxhbmNlX2F2YWlsYWJsZSIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzMyCiAgICAvLyBzZWxmLmJhbGFuY2VfYXZhaWxhYmxlICs9IGJldF9hbW91bnQgICMgQWRkIGJldCBhbW91bnQgdG8gYXZhaWxhYmxlIGZpcnN0CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMzMKICAgIC8vIG1heF9wb3NzaWJsZV9wYXlvdXQgPSBiZXRfYW1vdW50ICogVUludDY0KE1BWF9QQVlPVVRfTVVMVElQTElFUikKICAgIGZyYW1lX2RpZyAtMwogICAgaW50IDEwMAogICAgKgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMzQKICAgIC8vIHNlbGYuYmFsYW5jZV9sb2NrZWQgKz0gbWF4X3Bvc3NpYmxlX3BheW91dAogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODMKICAgIC8vIHNlbGYuYmFsYW5jZV9sb2NrZWQgPSBVSW50NjQoKQogICAgYnl0ZSAiYmFsYW5jZV9sb2NrZWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMzNAogICAgLy8gc2VsZi5iYWxhbmNlX2xvY2tlZCArPSBtYXhfcG9zc2libGVfcGF5b3V0CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuYmFsYW5jZV9sb2NrZWQgZXhpc3RzCiAgICBkaWcgMQogICAgKwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4MwogICAgLy8gc2VsZi5iYWxhbmNlX2xvY2tlZCA9IFVJbnQ2NCgpCiAgICBieXRlICJiYWxhbmNlX2xvY2tlZCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzM0CiAgICAvLyBzZWxmLmJhbGFuY2VfbG9ja2VkICs9IG1heF9wb3NzaWJsZV9wYXlvdXQKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMzNQogICAgLy8gc2VsZi5iYWxhbmNlX2F2YWlsYWJsZSAtPSBtYXhfcG9zc2libGVfcGF5b3V0CiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4MgogICAgLy8gc2VsZi5iYWxhbmNlX2F2YWlsYWJsZSA9IFVJbnQ2NCgpCiAgICBieXRlICJiYWxhbmNlX2F2YWlsYWJsZSIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzM1CiAgICAvLyBzZWxmLmJhbGFuY2VfYXZhaWxhYmxlIC09IG1heF9wb3NzaWJsZV9wYXlvdXQKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5iYWxhbmNlX2F2YWlsYWJsZSBleGlzdHMKICAgIHN3YXAKICAgIC0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODIKICAgIC8vIHNlbGYuYmFsYW5jZV9hdmFpbGFibGUgPSBVSW50NjQoKQogICAgYnl0ZSAiYmFsYW5jZV9hdmFpbGFibGUiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMzNQogICAgLy8gc2VsZi5iYWxhbmNlX2F2YWlsYWJsZSAtPSBtYXhfcG9zc2libGVfcGF5b3V0CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMzcKICAgIC8vIHJvdW5kID0gR2xvYmFsLnJvdW5kCiAgICBnbG9iYWwgUm91bmQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzM4CiAgICAvLyBiZXRfa2V5ID0gc2VsZi5fZ2V0X2JldF9rZXkoVHhuLnNlbmRlciwgYmV0X2Ftb3VudCwgcm91bmQsIGluZGV4KQogICAgdHhuIFNlbmRlcgogICAgZnJhbWVfZGlnIC0zCiAgICBkaWcgMgogICAgZnJhbWVfZGlnIC0yCiAgICBjYWxsc3ViIF9nZXRfYmV0X2tleQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4NC0zMzkKICAgIC8vICAgICBzZWxmLmJldCA9IEJveE1hcChCeXRlcywgQmV0LCBrZXlfcHJlZml4PSIiKQogICAgLy8gICAgICMgRGVmaW5lIGJhc2UgYW5kIG1heCBob3VzZSBlZGdlCiAgICAvLyAgICAgc2VsZi5iYXNlX2hvdXNlX2VkZ2VfYnBzID0gVUludDY0KDcwMDApICAjIDcwJSBiYXNlIGVkZ2UgKGRlZmF1bHQgNTYuNDElKQogICAgLy8gICAgIHNlbGYubWF4X2hvdXNlX2VkZ2VfYnBzID0gVUludDY0KDkwMDApICAjIDkwJSBtYXhpbXVtIGVkZ2UKICAgIC8vICAgICBzZWxmLm1pbl9ob3VzZV9lZGdlX2JwcyA9IFVJbnQ2NCgxMDAwKSAgIyAxMCUgbWluaW11bSBlZGdlCiAgICAvLyAgICAgc2VsZi5taW5fYmV0X2Ftb3VudCA9IFVJbnQ2NCgxMDAwMDAwKSAgIyAxIFZPSQogICAgLy8gCiAgICAvLyAjIG93bmVyIGRlcG9zaXQKICAgIC8vICMgb3duZXIgd2l0aGRyYXcKICAgIC8vICMgb3duZXIgc2V0IGhvdXNlIGVkZ2UKICAgIC8vICMgb3duZXIgc2V0IG1pbiBiZXQgYW1vdW50CiAgICAvLyAjIG93bmVyIHNldCBtYXggYmV0IGFtb3VudAogICAgLy8gCiAgICAvLyAjIHBsYXllciBiZXQKICAgIC8vICMgcGxheWVyIGNsYWltCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHBvc3RfdXBncmFkZShzZWxmKSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIENhbGxlZCBhZnRlciB1cGdyYWRlCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgc2VsZi5jb250cmFjdF92ZXJzaW9uID0gVUludDY0KENPTlRSQUNUX1ZFUlNJT04pCiAgICAvLyAgICAgc2VsZi5kZXBsb3ltZW50X3ZlcnNpb24gPSBVSW50NjQoREVQTE9ZTUVOVF9WRVJTSU9OKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIG9ubHlfb3duZXIoc2VsZikgLT4gTm9uZToKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBPbmx5IGNhbGxhYmxlIGJ5IGNvbnRyYWN0IG93bmVyCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgYXNzZXJ0IFR4bi5zZW5kZXIgPT0gc2VsZi5vd25lciwgIm9ubHkgb3duZXIgY2FuIGNhbGwgdGhpcyBmdW5jdGlvbiIKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2Jsb2NrX3NlZWQoc2VsZiwgcm91bmQ6IGFyYzQuVUludDY0KSAtPiBCeXRlczMyOgogICAgLy8gICAgIHJldHVybiBCeXRlczMyLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X2Jsb2NrX3NlZWQocm91bmQubmF0aXZlKSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2Jsb2NrX3NlZWQoc2VsZiwgcm91bmQ6IFVJbnQ2NCkgLT4gQnl0ZXM6CiAgICAvLyAgICAgcmV0dXJuIG9wLkJsb2NrLmJsa19zZWVkKHJvdW5kKVstMzI6XQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBkZXBvc2l0KHNlbGYpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgRGVwb3NpdCBmdW5kcyBpbnRvIHRoZSBjb250cmFjdAogICAgLy8gICAgICIiIgogICAgLy8gICAgIHBheW1lbnQgPSByZXF1aXJlX3BheW1lbnQoVHhuLnNlbmRlcikKICAgIC8vICAgICBhc3NlcnQgcGF5bWVudCA+IDAsICJwYXltZW50IG11c3QgYmUgZ3JlYXRlciB0aGFuIDAiCiAgICAvLyAgICAgc2VsZi5iYWxhbmNlX3RvdGFsICs9IHBheW1lbnQKICAgIC8vICAgICBzZWxmLmJhbGFuY2VfYXZhaWxhYmxlICs9IHBheW1lbnQKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgd2l0aGRyYXcoc2VsZiwgYW1vdW50OiBhcmM0LlVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBXaXRoZHJhdyBmdW5kcyBmcm9tIHRoZSBjb250cmFjdAogICAgLy8gICAgIE9ubHkgY2FsbGFibGUgYnkgY29udHJhY3Qgb3duZXIKICAgIC8vIAogICAgLy8gICAgIEFyZ3M6CiAgICAvLyAgICAgICAgIGFtb3VudDogVGhlIGFtb3VudCBvZiBmdW5kcyB0byB3aXRoZHJhdyBpbiBhdG9taWMgdW5pdHMKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBzZWxmLm9ubHlfb3duZXIoKQogICAgLy8gICAgIGFzc2VydCBhbW91bnQubmF0aXZlID4gVUludDY0KDApLCAiYW1vdW50IG11c3QgYmUgZ3JlYXRlciB0aGFuIDAiCiAgICAvLyAgICAgYXNzZXJ0IGFtb3VudC5uYXRpdmUgPD0gc2VsZi5iYWxhbmNlX2F2YWlsYWJsZSwgImluc3VmZmljaWVudCBiYWxhbmNlIgogICAgLy8gICAgIGl0eG4uUGF5bWVudChyZWNlaXZlcj1UeG4uc2VuZGVyLCBhbW91bnQ9YW1vdW50Lm5hdGl2ZSkuc3VibWl0KCkKICAgIC8vICAgICBzZWxmLmJhbGFuY2VfYXZhaWxhYmxlIC09IGFtb3VudC5uYXRpdmUKICAgIC8vICAgICBzZWxmLmJhbGFuY2VfdG90YWwgLT0gYW1vdW50Lm5hdGl2ZQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfYmV0X2tleSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIGFkZHJlc3M6IGFyYzQuQWRkcmVzcywKICAgIC8vICAgICBhbW91bnQ6IGFyYzQuVUludDY0LAogICAgLy8gICAgIHJvdW5kOiBhcmM0LlVJbnQ2NCwKICAgIC8vICAgICBpbmRleDogYXJjNC5VSW50NjQsCiAgICAvLyApIC0+IEJ5dGVzNTY6CiAgICAvLyAgICAgcmV0dXJuIEJ5dGVzNTYuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgc2VsZi5fZ2V0X2JldF9rZXkoYWRkcmVzcy5uYXRpdmUsIGFtb3VudC5uYXRpdmUsIHJvdW5kLm5hdGl2ZSwgaW5kZXgubmF0aXZlKQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2JldF9rZXkoCiAgICAvLyAgICAgc2VsZiwgYWRkcmVzczogQWNjb3VudCwgYW1vdW50OiBVSW50NjQsIHJvdW5kOiBVSW50NjQsIGluZGV4OiBVSW50NjQKICAgIC8vICkgLT4gQnl0ZXM6CiAgICAvLyAgICAgcmV0dXJuICgKICAgIC8vICAgICAgICAgYXJjNC5BZGRyZXNzKGFkZHJlc3MpLmJ5dGVzCiAgICAvLyAgICAgICAgICsgYXJjNC5VSW50NjQoYW1vdW50KS5ieXRlcwogICAgLy8gICAgICAgICArIGFyYzQuVUludDY0KHJvdW5kKS5ieXRlcwogICAgLy8gICAgICAgICArIGFyYzQuVUludDY0KGluZGV4KS5ieXRlcwogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2R5bmFtaWNfaG91c2VfZWRnZShzZWxmLCBiZXRfYW1vdW50OiBVSW50NjQpIC0+IFVJbnQ2NDoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBDYWxjdWxhdGUgZHluYW1pYyBob3VzZSBlZGdlIGJhc2VkIG9uIGNvbnRyYWN0IGJhbGFuY2UgYW5kIGJldCBhbW91bnQKICAgIC8vICAgICBSZXR1cm5zIGhvdXNlIGVkZ2UgaW4gYmFzaXMgcG9pbnRzICgxLTEwMDAwKQogICAgLy8gICAgICIiIgogICAgLy8gICAgICMgVXNlIGJhbGFuY2VfYXZhaWxhYmxlIGluc3RlYWQgb2YgdG90YWwgY29udHJhY3QgYmFsYW5jZQogICAgLy8gICAgIGNvbnRyYWN0X2JhbGFuY2UgPSBzZWxmLmJhbGFuY2VfYXZhaWxhYmxlCiAgICAvLyAKICAgIC8vICAgICAjIFJldHVybiBtYXhpbXVtIGhvdXNlIGVkZ2UgaWYgY29udHJhY3QgYmFsYW5jZSBpcyB0b28gbG93CiAgICAvLyAgICAgaWYgY29udHJhY3RfYmFsYW5jZSA8PSBiZXRfYW1vdW50OgogICAgLy8gICAgICAgICByZXR1cm4gc2VsZi5tYXhfaG91c2VfZWRnZV9icHMKICAgIC8vIAogICAgLy8gICAgICMgQ2FsY3VsYXRlIHJpc2sgcmF0aW8gKGJldCBhbW91bnQgYXMgcGVyY2VudGFnZSBvZiBiYWxhbmNlLCBpbiBiYXNpcyBwb2ludHMpCiAgICAvLyAgICAgcmlza19yYXRpbyA9IChiZXRfYW1vdW50ICogVUludDY0KDEwMDAwKSkgLy8gY29udHJhY3RfYmFsYW5jZQogICAgLy8gCiAgICAvLyAgICAgIyBTdGFydCB3aXRoIGJhc2UgaG91c2UgZWRnZQogICAgLy8gICAgIGR5bmFtaWNfZWRnZSA9IHNlbGYuYmFzZV9ob3VzZV9lZGdlX2JwcwogICAgLy8gCiAgICAvLyAgICAgIyBJZiBiZXQgaXMgc21hbGwgcmVsYXRpdmUgdG8gYSBoZWFsdGh5IGJhbGFuY2UsIGRlY3JlYXNlIGhvdXNlIGVkZ2UKICAgIC8vICAgICAjIGlmIHJpc2tfcmF0aW8gPCBVSW50NjQoMTAwKTogICMgSWYgYmV0IGlzIGxlc3MgdGhhbiAxJSBvZiBiYWxhbmNlCiAgICAvLyAgICAgIyAgICAgIyBEZWNyZWFzZSBlZGdlIGJ5IHVwIHRvIDIwJSBvZiBiYXNlIGVkZ2Ugd2hlbiBjb250cmFjdCBpcyB2ZXJ5IGhlYWx0aHkKICAgIC8vICAgICAjICAgICBtYXhfcmVkdWN0aW9uID0gc2VsZi5iYXNlX2hvdXNlX2VkZ2VfYnBzIC8vIFVJbnQ2NCg1KQogICAgLy8gICAgICMgICAgIGVkZ2VfcmVkdWN0aW9uID0gKFVJbnQ2NCgxMDApIC0gcmlza19yYXRpbykgKiBtYXhfcmVkdWN0aW9uIC8vIFVJbnQ2NCgxMDApCiAgICAvLyAgICAgIyAgICAgZHluYW1pY19lZGdlIC09IGVkZ2VfcmVkdWN0aW9uCiAgICAvLyAgICAgIyBJZiBiZXQgaXMgbGFyZ2UgcmVsYXRpdmUgdG8gYmFsYW5jZSwgaW5jcmVhc2UgaG91c2UgZWRnZQogICAgLy8gICAgIGlmIHJpc2tfcmF0aW8gPiBVSW50NjQoMTAwMCk6ICAjIElmIGJldCBpcyBtb3JlIHRoYW4gMTAlIG9mIGJhbGFuY2UKICAgIC8vICAgICAgICAgZWRnZV9pbmNyZWFzZSA9IChyaXNrX3JhdGlvIC0gVUludDY0KDEwMDApKSAvLyBVSW50NjQoMTAwKQogICAgLy8gICAgICAgICBkeW5hbWljX2VkZ2UgKz0gZWRnZV9pbmNyZWFzZQogICAgLy8gCiAgICAvLyAgICAgIyBFbnN1cmUgaG91c2UgZWRnZSBzdGF5cyB3aXRoaW4gYm91bmRzCiAgICAvLyAgICAgZHluYW1pY19lZGdlID0gc2VsZi5taW4oZHluYW1pY19lZGdlLCBzZWxmLm1heF9ob3VzZV9lZGdlX2JwcykKICAgIC8vICAgICBkeW5hbWljX2VkZ2UgPSBzZWxmLm1heChkeW5hbWljX2VkZ2UsIHNlbGYubWluX2hvdXNlX2VkZ2VfYnBzKQogICAgLy8gCiAgICAvLyAgICAgcmV0dXJuIGR5bmFtaWNfZWRnZQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jYWxjdWxhdGVfYmV0X3BheW91dCgKICAgIC8vICAgICBzZWxmLCBiZXRfYW1vdW50OiBVSW50NjQsIHI6IFVJbnQ2NCwgaG91c2VfZWRnZV9icHM6IFVJbnQ2NAogICAgLy8gKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgQ2FsY3VsYXRlIHRoZSBwYXlvdXQgZm9yIGEgYmV0IHVzaW5nIGR5bmFtaWMgaG91c2UgZWRnZQogICAgLy8gICAgICIiIgogICAgLy8gICAgIGFzc2VydCByIDwgTUFYX1JBTkRPTV9OVU1CRVIsICJyYW5kb20gbnVtYmVyIHRvbyBsYXJnZSIKICAgIC8vIAogICAgLy8gICAgICMgVXNlIGR5bmFtaWMgaG91c2UgZWRnZSBpbnN0ZWFkIG9mIGZpeGVkCiAgICAvLyAgICAgaG91c2VfZWRnZV9icHMgPSBzZWxmLl9nZXRfZHluYW1pY19ob3VzZV9lZGdlKGJldF9hbW91bnQpCiAgICAvLyAgICAgc2NhbGluZ19mYWN0b3IgPSBVSW50NjQoMTAwMDApIC0gaG91c2VfZWRnZV9icHMKICAgIC8vIAogICAgLy8gICAgICMgV2FsayB0aHJvdWdoIGVhY2ggcGF5b3V0IG9wdGlvbiB3aXRoIHNjYWxlZCBwcm9iYWJpbGl0aWVzCiAgICAvLyAgICAgIyBCYXNlIHByb2JhYmlsaXRpZXMgdGhhdCB0dXBsZVssIFVJbnQ2NF13b3VsZCBnaXZlIDEwMCUgcmV0dXJuIChubyBob3VzZSBlZGdlKQogICAgLy8gICAgICMgZmFpcl9wYXlvdXRzID0gWwogICAgLy8gICAgICMgICAgICgxMDAsIDEwMDAwMDApLCAgIyAxJSBjaGFuY2UgZm9yIDEwMHgKICAgIC8vICAgICAjICAgICAoNTAsIDIwMDAwMDApLCAgIyAyJSBjaGFuY2UgZm9yIDUweAogICAgLy8gICAgICMgICAgICgyMCwgNTAwMDAwMCksICAjIDUlIGNoYW5jZSBmb3IgMjB4CiAgICAvLyAgICAgIyAgICAgKDEwLCAxMDAwMDAwMCksICAjIDEwJSBjaGFuY2UgZm9yIDEweAogICAgLy8gICAgICMgICAgICg1LCAyMDAwMDAwMCksICAjIDIwJSBjaGFuY2UgZm9yIDV4CiAgICAvLyAgICAgIyAgICAgKDIsIDYyMDAwMDAwKSwgICMgNjIlIGNoYW5jZSBmb3IgMngKICAgIC8vICAgICAjIF0KICAgIC8vICAgICAjIGZvciBtdWx0aXBsaWVyLCBiYXNlX3Byb2IgaW4gZmFpcl9wYXlvdXRzOgogICAgLy8gICAgICMgICAgIHNjYWxlZF9wcm9iID0gKGJhc2VfcHJvYiAqIHNjYWxpbmdfZmFjdG9yKSAvLyBVSW50NjQoMTAwMDApCiAgICAvLyAgICAgIyAgICAgaWYgciA8IHNjYWxlZF9wcm9iOgogICAgLy8gICAgICMgICAgICAgICByZXR1cm4gYmV0X2Ftb3VudCAqIG11bHRpcGxpZXIKICAgIC8vICAgICAjICAgICByIC09IHNjYWxlZF9wcm9iCiAgICAvLyAgICAgbXVsdGlwbGllcnMgPSBhcmM0LlN0YXRpY0FycmF5KAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgxMDApLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCg1MCksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDIwKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMTApLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCg1KSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgKQogICAgLy8gICAgIHByb2JhYmlsaXRpZXMgPSBhcmM0LlN0YXRpY0FycmF5KAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgxMDAwMDAwKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMjAwMDAwMCksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDUwMDAwMDApLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgxMDAwMDAwMCksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDIwMDAwMDAwKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoNjIwMDAwMDApLAogICAgLy8gICAgICkKICAgIC8vICAgICBmb3IgaW5kZXggaW4gdXJhbmdlKDYpOgogICAgLy8gICAgICAgICBtdWx0aXBsaWVyID0gbXVsdGlwbGllcnNbaW5kZXhdLm5hdGl2ZQogICAgLy8gICAgICAgICBiYXNlX3Byb2IgPSBwcm9iYWJpbGl0aWVzW2luZGV4XS5uYXRpdmUKICAgIC8vICAgICAgICAgc2NhbGVkX3Byb2IgPSAoYmFzZV9wcm9iICogc2NhbGluZ19mYWN0b3IpIC8vIFVJbnQ2NCgxMDAwMCkKICAgIC8vICAgICAgICAgaWYgciA8IHNjYWxlZF9wcm9iOgogICAgLy8gICAgICAgICAgICAgcmV0dXJuIGJldF9hbW91bnQgKiBtdWx0aXBsaWVyCiAgICAvLyAgICAgICAgIHIgLT0gc2NhbGVkX3Byb2IKICAgIC8vIAogICAgLy8gICAgICMgSWYgciByZW1haW5zIGFmdGVyIGFsbCBwYXlvdXRzLCBpdCdzIGEgbG9zZQogICAgLy8gICAgIHJldHVybiBVSW50NjQoMCkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X21heF9iZXQoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgR2V0IHRoZSBtYXhpbXVtIGJldCBhbW91bnQKICAgIC8vICAgICAiIiIKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X21heF9iZXQoKSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X21heF9iZXQoc2VsZikgLT4gVUludDY0OgogICAgLy8gICAgICIiIgogICAgLy8gICAgIENhbGN1bGF0ZSBtYXhpbXVtIGJldCBiYXNlZCBvbiBhdmFpbGFibGUgYmFsYW5jZSBhbmQgbWF4IHBheW91dCBtdWx0aXBsaWVyCiAgICAvLyAgICAgUmV0dXJucyB0aGUgbWF4aW11bSBhbGxvd2VkIGJldCBpbiBhdG9taWMgdW5pdHMKICAgIC8vICAgICAiIiIKICAgIC8vICAgICAjIE1heCBiZXQgPSBhdmFpbGFibGUgYmFsYW5jZSAvIG1heCBwYXlvdXQgKDEwMHgpCiAgICAvLyAgICAgcmV0dXJuIHNlbGYuYmFsYW5jZV9hdmFpbGFibGUgLy8gVUludDY0KDEwMCkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgc3BpbigKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIGJldF9hbW91bnQ6IGFyYzQuVUludDY0LAogICAgLy8gICAgIGluZGV4OiBhcmM0LlVJbnQ2NCwKICAgIC8vICAgICBmdXR1cmVfcm91bmRfb2Zmc2V0OiBhcmM0LlVJbnQ2NCwKICAgIC8vICkgLT4gQnl0ZXM1NjoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBTcGluIHRoZSBzbG90IG1hY2hpbmUuIE91dGNvbWUgaXMgZGV0ZXJtaW5lZCBieSB0aGUgc2VlZAogICAgLy8gICAgIG9mIGZ1dHVyZSByb3VuZC4KICAgIC8vIAogICAgLy8gICAgIEFyZ3M6CiAgICAvLyAgICAgICAgIGJldCAodWludCk6IFRoZSBwbGF5ZXIncyB3YWdlci4KICAgIC8vICAgICAgICAgaW5kZXggKHVpbnQpOiBVc2VkIHRvIGRldGVybWluZSB3aGljaCA4IGJ5dGVzIG9mIHRoZSBibG9jayBzZWVkIHRvIHVzZS4KICAgIC8vIAogICAgLy8gICAgIFJldHVybnM6CiAgICAvLyAgICAgICAgIHIgKHVpbnQpOiBUaGUgcm91bmQgbnVtYmVyIG9mIHRoZSBzcGluLgogICAgLy8gICAgICIiIgogICAgLy8gICAgIHJldHVybiBCeXRlczU2LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgIHNlbGYuX3NwaW4oYmV0X2Ftb3VudC5uYXRpdmUsIGluZGV4Lm5hdGl2ZSwgZnV0dXJlX3JvdW5kX29mZnNldC5uYXRpdmUpCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9zcGluKAogICAgLy8gICAgIHNlbGYsIGJldF9hbW91bnQ6IFVJbnQ2NCwgaW5kZXg6IFVJbnQ2NCwgZnV0dXJlX3JvdW5kX29mZnNldDogVUludDY0CiAgICAvLyApIC0+IEJ5dGVzOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIFNwaW4gdGhlIHNsb3QgbWFjaGluZS4gT3V0Y29tZSBpcyBkZXRlcm1pbmVkIGJ5IHRoZSBzZWVkCiAgICAvLyAgICAgb2YgZnV0dXJlIHJvdW5kLgogICAgLy8gCiAgICAvLyAgICAgQXJnczoKICAgIC8vICAgICAgICAgYmV0ICh1aW50KTogVGhlIHBsYXllcidzIHdhZ2VyLgogICAgLy8gCiAgICAvLyAgICAgUmV0dXJuczoKICAgIC8vICAgICAgICAgciAodWludCk6IFRoZSByb3VuZCBudW1iZXIgb2YgdGhlIHNwaW4uCiAgICAvLyAKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBhc3NlcnQgaW5kZXggPCBVSW50NjQoMjQpLCAiaW5kZXggbXVzdCBiZSBsZXNzIHRoYW4gMjQiCiAgICAvLyAgICAgYXNzZXJ0IGJldF9hbW91bnQgPj0gc2VsZi5taW5fYmV0X2Ftb3VudCwgImJldCBhbW91bnQgdG9vIHNtYWxsIgogICAgLy8gICAgIG1heF9iZXQgPSBzZWxmLl9nZXRfbWF4X2JldCgpCiAgICAvLyAgICAgYXNzZXJ0IGJldF9hbW91bnQgPD0gbWF4X2JldCwgImJldCBhbW91bnQgdG9vIGxhcmdlIgogICAgLy8gICAgIHBheW1lbnQgPSByZXF1aXJlX3BheW1lbnQoVHhuLnNlbmRlcikKICAgIC8vICAgICBhc3NlcnQgcGF5bWVudCA+PSBiZXRfYW1vdW50LCAicGF5bWVudCBpbnN1ZmZpY2llbnQiCiAgICAvLyAgICAgZXh0cmFfcGF5bWVudCA9IHBheW1lbnQgLSBiZXRfYW1vdW50CiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgZXh0cmFfcGF5bWVudCA+PSBCT1hfQ09TVF9CRVQKICAgIC8vICAgICApLCAiZXh0cmEgcGF5bWVudCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBib3ggY29zdCIKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBleHRyYV9wYXltZW50IDw9IE1BWF9FWFRSQV9QQVlNRU5UCiAgICAvLyAgICAgKSwgImV4dHJhIHBheW1lbnQgbXVzdCBiZSBsZXNzIHRoYW4gbWF4IGV4dHJhIHBheW1lbnQiCiAgICAvLyAKICAgIC8vICAgICAjIFVwZGF0ZSBiYWxhbmNlIHRyYWNraW5nCiAgICAvLyAgICAgc2VsZi5iYWxhbmNlX3RvdGFsICs9IGJldF9hbW91bnQKICAgIC8vICAgICBzZWxmLmJhbGFuY2VfYXZhaWxhYmxlICs9IGJldF9hbW91bnQgICMgQWRkIGJldCBhbW91bnQgdG8gYXZhaWxhYmxlIGZpcnN0CiAgICAvLyAgICAgbWF4X3Bvc3NpYmxlX3BheW91dCA9IGJldF9hbW91bnQgKiBVSW50NjQoTUFYX1BBWU9VVF9NVUxUSVBMSUVSKQogICAgLy8gICAgIHNlbGYuYmFsYW5jZV9sb2NrZWQgKz0gbWF4X3Bvc3NpYmxlX3BheW91dAogICAgLy8gICAgIHNlbGYuYmFsYW5jZV9hdmFpbGFibGUgLT0gbWF4X3Bvc3NpYmxlX3BheW91dAogICAgLy8gCiAgICAvLyAgICAgcm91bmQgPSBHbG9iYWwucm91bmQKICAgIC8vICAgICBiZXRfa2V5ID0gc2VsZi5fZ2V0X2JldF9rZXkoVHhuLnNlbmRlciwgYmV0X2Ftb3VudCwgcm91bmQsIGluZGV4KQogICAgLy8gICAgIGFzc2VydCBiZXRfa2V5IG5vdCBpbiBzZWxmLmJldCwgImJldCBhbHJlYWR5IGV4aXN0cyIKICAgIGR1cAogICAgYm94X2xlbgogICAgYnVyeSAxCiAgICAhCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMzOQogICAgLy8gYXNzZXJ0IGJldF9rZXkgbm90IGluIHNlbGYuYmV0LCAiYmV0IGFscmVhZHkgZXhpc3RzIgogICAgYXNzZXJ0IC8vIGJldCBhbHJlYWR5IGV4aXN0cwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNDAKICAgIC8vIGNsYWltX3JvdW5kID0gcm91bmQgKyBST1VORF9GVVRVUkVfREVMVEEgKyBmdXR1cmVfcm91bmRfb2Zmc2V0CiAgICBkaWcgMQogICAgaW50IDEKICAgICsKICAgIGZyYW1lX2RpZyAtMQogICAgKwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNDIKICAgIC8vIHdobz1hcmM0LkFkZHJlc3MoVHhuLnNlbmRlciksCiAgICB0eG4gU2VuZGVyCiAgICBjb3ZlciAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM0MwogICAgLy8gYW1vdW50PWFyYzQuVUludDY0KGJldF9hbW91bnQpLAogICAgZnJhbWVfZGlnIC0zCiAgICBpdG9iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM0NAogICAgLy8gY29uZmlybWVkX3JvdW5kPWFyYzQuVUludDY0KHJvdW5kKSwKICAgIHVuY292ZXIgNAogICAgaXRvYgogICAgY292ZXIgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNDUKICAgIC8vIGluZGV4PWFyYzQuVUludDY0KGluZGV4KSwKICAgIGZyYW1lX2RpZyAtMgogICAgaXRvYgogICAgY292ZXIgNAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNDYKICAgIC8vIGNsYWltX3JvdW5kPWFyYzQuVUludDY0KGNsYWltX3JvdW5kKSwKICAgIHN3YXAKICAgIGl0b2IKICAgIGNvdmVyIDQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzQxLTM0NwogICAgLy8gc2VsZi5iZXRbYmV0X2tleV0gPSBCZXQoCiAgICAvLyAgICAgd2hvPWFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKSwKICAgIC8vICAgICBhbW91bnQ9YXJjNC5VSW50NjQoYmV0X2Ftb3VudCksCiAgICAvLyAgICAgY29uZmlybWVkX3JvdW5kPWFyYzQuVUludDY0KHJvdW5kKSwKICAgIC8vICAgICBpbmRleD1hcmM0LlVJbnQ2NChpbmRleCksCiAgICAvLyAgICAgY2xhaW1fcm91bmQ9YXJjNC5VSW50NjQoY2xhaW1fcm91bmQpLAogICAgLy8gKQogICAgdW5jb3ZlciA1CiAgICBkaWcgMQogICAgY29uY2F0CiAgICBkaWcgMgogICAgY29uY2F0CiAgICBkaWcgNAogICAgY29uY2F0CiAgICBkaWcgNQogICAgY29uY2F0CiAgICBkaWcgMwogICAgc3dhcAogICAgYm94X3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTAKICAgIC8vIHdobz1hcmM0LkFkZHJlc3MoVHhuLnNlbmRlciksCiAgICB0eG4gU2VuZGVyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM0OS0zNTUKICAgIC8vIEJldFBsYWNlZCgKICAgIC8vICAgICB3aG89YXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICAgIGFtb3VudD1hcmM0LlVJbnQ2NChiZXRfYW1vdW50KSwKICAgIC8vICAgICBjb25maXJtZWRfcm91bmQ9YXJjNC5VSW50NjQocm91bmQpLAogICAgLy8gICAgIGluZGV4PWFyYzQuVUludDY0KGluZGV4KSwKICAgIC8vICAgICBjbGFpbV9yb3VuZD1hcmM0LlVJbnQ2NChjbGFpbV9yb3VuZCksCiAgICAvLyApCiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgdW5jb3ZlciAyCiAgICBjb25jYXQKICAgIHVuY292ZXIgMgogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM0OC0zNTYKICAgIC8vIGFyYzQuZW1pdCgKICAgIC8vICAgICBCZXRQbGFjZWQoCiAgICAvLyAgICAgICAgIHdobz1hcmM0LkFkZHJlc3MoVHhuLnNlbmRlciksCiAgICAvLyAgICAgICAgIGFtb3VudD1hcmM0LlVJbnQ2NChiZXRfYW1vdW50KSwKICAgIC8vICAgICAgICAgY29uZmlybWVkX3JvdW5kPWFyYzQuVUludDY0KHJvdW5kKSwKICAgIC8vICAgICAgICAgaW5kZXg9YXJjNC5VSW50NjQoaW5kZXgpLAogICAgLy8gICAgICAgICBjbGFpbV9yb3VuZD1hcmM0LlVJbnQ2NChjbGFpbV9yb3VuZCksCiAgICAvLyAgICAgKQogICAgLy8gKQogICAgbWV0aG9kICJCZXRQbGFjZWQoYWRkcmVzcyx1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50NjQpIgogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU3CiAgICAvLyByZXR1cm4gYmV0X2tleQogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuY2xhaW0oYmV0X2tleTogYnl0ZXMpIC0+IGJ5dGVzOgpjbGFpbToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU5LTM2MAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgY2xhaW0oc2VsZiwgYmV0X2tleTogQnl0ZXM1NikgLT4gYXJjNC5VSW50NjQ6CiAgICBwcm90byAxIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzcwCiAgICAvLyByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fY2xhaW0oYmV0X2tleS5ieXRlcykpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2NsYWltCiAgICBpdG9iCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fY2xhaW0oYmV0X2tleTogYnl0ZXMpIC0+IHVpbnQ2NDoKX2NsYWltOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzItMzczCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jbGFpbShzZWxmLCBiZXRfa2V5OiBCeXRlcykgLT4gVUludDY0OgogICAgcHJvdG8gMSAxCiAgICBpbnQgMAogICAgZHVwCiAgICBieXRlICIiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojg0LTM4MgogICAgLy8gICAgIHNlbGYuYmV0ID0gQm94TWFwKEJ5dGVzLCBCZXQsIGtleV9wcmVmaXg9IiIpCiAgICAvLyAgICAgIyBEZWZpbmUgYmFzZSBhbmQgbWF4IGhvdXNlIGVkZ2UKICAgIC8vICAgICBzZWxmLmJhc2VfaG91c2VfZWRnZV9icHMgPSBVSW50NjQoNzAwMCkgICMgNzAlIGJhc2UgZWRnZSAoZGVmYXVsdCA1Ni40MSUpCiAgICAvLyAgICAgc2VsZi5tYXhfaG91c2VfZWRnZV9icHMgPSBVSW50NjQoOTAwMCkgICMgOTAlIG1heGltdW0gZWRnZQogICAgLy8gICAgIHNlbGYubWluX2hvdXNlX2VkZ2VfYnBzID0gVUludDY0KDEwMDApICAjIDEwJSBtaW5pbXVtIGVkZ2UKICAgIC8vICAgICBzZWxmLm1pbl9iZXRfYW1vdW50ID0gVUludDY0KDEwMDAwMDApICAjIDEgVk9JCiAgICAvLyAKICAgIC8vICMgb3duZXIgZGVwb3NpdAogICAgLy8gIyBvd25lciB3aXRoZHJhdwogICAgLy8gIyBvd25lciBzZXQgaG91c2UgZWRnZQogICAgLy8gIyBvd25lciBzZXQgbWluIGJldCBhbW91bnQKICAgIC8vICMgb3duZXIgc2V0IG1heCBiZXQgYW1vdW50CiAgICAvLyAKICAgIC8vICMgcGxheWVyIGJldAogICAgLy8gIyBwbGF5ZXIgY2xhaW0KICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgcG9zdF91cGdyYWRlKHNlbGYpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgQ2FsbGVkIGFmdGVyIHVwZ3JhZGUKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBzZWxmLmNvbnRyYWN0X3ZlcnNpb24gPSBVSW50NjQoQ09OVFJBQ1RfVkVSU0lPTikKICAgIC8vICAgICBzZWxmLmRlcGxveW1lbnRfdmVyc2lvbiA9IFVJbnQ2NChERVBMT1lNRU5UX1ZFUlNJT04pCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgb25seV9vd25lcihzZWxmKSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIE9ubHkgY2FsbGFibGUgYnkgY29udHJhY3Qgb3duZXIKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBhc3NlcnQgVHhuLnNlbmRlciA9PSBzZWxmLm93bmVyLCAib25seSBvd25lciBjYW4gY2FsbCB0aGlzIGZ1bmN0aW9uIgogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBnZXRfYmxvY2tfc2VlZChzZWxmLCByb3VuZDogYXJjNC5VSW50NjQpIC0+IEJ5dGVzMzI6CiAgICAvLyAgICAgcmV0dXJuIEJ5dGVzMzIuZnJvbV9ieXRlcyhzZWxmLl9nZXRfYmxvY2tfc2VlZChyb3VuZC5uYXRpdmUpKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfYmxvY2tfc2VlZChzZWxmLCByb3VuZDogVUludDY0KSAtPiBCeXRlczoKICAgIC8vICAgICByZXR1cm4gb3AuQmxvY2suYmxrX3NlZWQocm91bmQpWy0zMjpdCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGRlcG9zaXQoc2VsZikgLT4gTm9uZToKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBEZXBvc2l0IGZ1bmRzIGludG8gdGhlIGNvbnRyYWN0CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgcGF5bWVudCA9IHJlcXVpcmVfcGF5bWVudChUeG4uc2VuZGVyKQogICAgLy8gICAgIGFzc2VydCBwYXltZW50ID4gMCwgInBheW1lbnQgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIKICAgIC8vICAgICBzZWxmLmJhbGFuY2VfdG90YWwgKz0gcGF5bWVudAogICAgLy8gICAgIHNlbGYuYmFsYW5jZV9hdmFpbGFibGUgKz0gcGF5bWVudAogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiB3aXRoZHJhdyhzZWxmLCBhbW91bnQ6IGFyYzQuVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIFdpdGhkcmF3IGZ1bmRzIGZyb20gdGhlIGNvbnRyYWN0CiAgICAvLyAgICAgT25seSBjYWxsYWJsZSBieSBjb250cmFjdCBvd25lcgogICAgLy8gCiAgICAvLyAgICAgQXJnczoKICAgIC8vICAgICAgICAgYW1vdW50OiBUaGUgYW1vdW50IG9mIGZ1bmRzIHRvIHdpdGhkcmF3IGluIGF0b21pYyB1bml0cwogICAgLy8gICAgICIiIgogICAgLy8gICAgIHNlbGYub25seV9vd25lcigpCiAgICAvLyAgICAgYXNzZXJ0IGFtb3VudC5uYXRpdmUgPiBVSW50NjQoMCksICJhbW91bnQgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIKICAgIC8vICAgICBhc3NlcnQgYW1vdW50Lm5hdGl2ZSA8PSBzZWxmLmJhbGFuY2VfYXZhaWxhYmxlLCAiaW5zdWZmaWNpZW50IGJhbGFuY2UiCiAgICAvLyAgICAgaXR4bi5QYXltZW50KHJlY2VpdmVyPVR4bi5zZW5kZXIsIGFtb3VudD1hbW91bnQubmF0aXZlKS5zdWJtaXQoKQogICAgLy8gICAgIHNlbGYuYmFsYW5jZV9hdmFpbGFibGUgLT0gYW1vdW50Lm5hdGl2ZQogICAgLy8gICAgIHNlbGYuYmFsYW5jZV90b3RhbCAtPSBhbW91bnQubmF0aXZlCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9iZXRfa2V5KAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgYWRkcmVzczogYXJjNC5BZGRyZXNzLAogICAgLy8gICAgIGFtb3VudDogYXJjNC5VSW50NjQsCiAgICAvLyAgICAgcm91bmQ6IGFyYzQuVUludDY0LAogICAgLy8gICAgIGluZGV4OiBhcmM0LlVJbnQ2NCwKICAgIC8vICkgLT4gQnl0ZXM1NjoKICAgIC8vICAgICByZXR1cm4gQnl0ZXM1Ni5mcm9tX2J5dGVzKAogICAgLy8gICAgICAgICBzZWxmLl9nZXRfYmV0X2tleShhZGRyZXNzLm5hdGl2ZSwgYW1vdW50Lm5hdGl2ZSwgcm91bmQubmF0aXZlLCBpbmRleC5uYXRpdmUpCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfYmV0X2tleSgKICAgIC8vICAgICBzZWxmLCBhZGRyZXNzOiBBY2NvdW50LCBhbW91bnQ6IFVJbnQ2NCwgcm91bmQ6IFVJbnQ2NCwgaW5kZXg6IFVJbnQ2NAogICAgLy8gKSAtPiBCeXRlczoKICAgIC8vICAgICByZXR1cm4gKAogICAgLy8gICAgICAgICBhcmM0LkFkZHJlc3MoYWRkcmVzcykuYnl0ZXMKICAgIC8vICAgICAgICAgKyBhcmM0LlVJbnQ2NChhbW91bnQpLmJ5dGVzCiAgICAvLyAgICAgICAgICsgYXJjNC5VSW50NjQocm91bmQpLmJ5dGVzCiAgICAvLyAgICAgICAgICsgYXJjNC5VSW50NjQoaW5kZXgpLmJ5dGVzCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfZHluYW1pY19ob3VzZV9lZGdlKHNlbGYsIGJldF9hbW91bnQ6IFVJbnQ2NCkgLT4gVUludDY0OgogICAgLy8gICAgICIiIgogICAgLy8gICAgIENhbGN1bGF0ZSBkeW5hbWljIGhvdXNlIGVkZ2UgYmFzZWQgb24gY29udHJhY3QgYmFsYW5jZSBhbmQgYmV0IGFtb3VudAogICAgLy8gICAgIFJldHVybnMgaG91c2UgZWRnZSBpbiBiYXNpcyBwb2ludHMgKDEtMTAwMDApCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgIyBVc2UgYmFsYW5jZV9hdmFpbGFibGUgaW5zdGVhZCBvZiB0b3RhbCBjb250cmFjdCBiYWxhbmNlCiAgICAvLyAgICAgY29udHJhY3RfYmFsYW5jZSA9IHNlbGYuYmFsYW5jZV9hdmFpbGFibGUKICAgIC8vIAogICAgLy8gICAgICMgUmV0dXJuIG1heGltdW0gaG91c2UgZWRnZSBpZiBjb250cmFjdCBiYWxhbmNlIGlzIHRvbyBsb3cKICAgIC8vICAgICBpZiBjb250cmFjdF9iYWxhbmNlIDw9IGJldF9hbW91bnQ6CiAgICAvLyAgICAgICAgIHJldHVybiBzZWxmLm1heF9ob3VzZV9lZGdlX2JwcwogICAgLy8gCiAgICAvLyAgICAgIyBDYWxjdWxhdGUgcmlzayByYXRpbyAoYmV0IGFtb3VudCBhcyBwZXJjZW50YWdlIG9mIGJhbGFuY2UsIGluIGJhc2lzIHBvaW50cykKICAgIC8vICAgICByaXNrX3JhdGlvID0gKGJldF9hbW91bnQgKiBVSW50NjQoMTAwMDApKSAvLyBjb250cmFjdF9iYWxhbmNlCiAgICAvLyAKICAgIC8vICAgICAjIFN0YXJ0IHdpdGggYmFzZSBob3VzZSBlZGdlCiAgICAvLyAgICAgZHluYW1pY19lZGdlID0gc2VsZi5iYXNlX2hvdXNlX2VkZ2VfYnBzCiAgICAvLyAKICAgIC8vICAgICAjIElmIGJldCBpcyBzbWFsbCByZWxhdGl2ZSB0byBhIGhlYWx0aHkgYmFsYW5jZSwgZGVjcmVhc2UgaG91c2UgZWRnZQogICAgLy8gICAgICMgaWYgcmlza19yYXRpbyA8IFVJbnQ2NCgxMDApOiAgIyBJZiBiZXQgaXMgbGVzcyB0aGFuIDElIG9mIGJhbGFuY2UKICAgIC8vICAgICAjICAgICAjIERlY3JlYXNlIGVkZ2UgYnkgdXAgdG8gMjAlIG9mIGJhc2UgZWRnZSB3aGVuIGNvbnRyYWN0IGlzIHZlcnkgaGVhbHRoeQogICAgLy8gICAgICMgICAgIG1heF9yZWR1Y3Rpb24gPSBzZWxmLmJhc2VfaG91c2VfZWRnZV9icHMgLy8gVUludDY0KDUpCiAgICAvLyAgICAgIyAgICAgZWRnZV9yZWR1Y3Rpb24gPSAoVUludDY0KDEwMCkgLSByaXNrX3JhdGlvKSAqIG1heF9yZWR1Y3Rpb24gLy8gVUludDY0KDEwMCkKICAgIC8vICAgICAjICAgICBkeW5hbWljX2VkZ2UgLT0gZWRnZV9yZWR1Y3Rpb24KICAgIC8vICAgICAjIElmIGJldCBpcyBsYXJnZSByZWxhdGl2ZSB0byBiYWxhbmNlLCBpbmNyZWFzZSBob3VzZSBlZGdlCiAgICAvLyAgICAgaWYgcmlza19yYXRpbyA+IFVJbnQ2NCgxMDAwKTogICMgSWYgYmV0IGlzIG1vcmUgdGhhbiAxMCUgb2YgYmFsYW5jZQogICAgLy8gICAgICAgICBlZGdlX2luY3JlYXNlID0gKHJpc2tfcmF0aW8gLSBVSW50NjQoMTAwMCkpIC8vIFVJbnQ2NCgxMDApCiAgICAvLyAgICAgICAgIGR5bmFtaWNfZWRnZSArPSBlZGdlX2luY3JlYXNlCiAgICAvLyAKICAgIC8vICAgICAjIEVuc3VyZSBob3VzZSBlZGdlIHN0YXlzIHdpdGhpbiBib3VuZHMKICAgIC8vICAgICBkeW5hbWljX2VkZ2UgPSBzZWxmLm1pbihkeW5hbWljX2VkZ2UsIHNlbGYubWF4X2hvdXNlX2VkZ2VfYnBzKQogICAgLy8gICAgIGR5bmFtaWNfZWRnZSA9IHNlbGYubWF4KGR5bmFtaWNfZWRnZSwgc2VsZi5taW5faG91c2VfZWRnZV9icHMpCiAgICAvLyAKICAgIC8vICAgICByZXR1cm4gZHluYW1pY19lZGdlCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NhbGN1bGF0ZV9iZXRfcGF5b3V0KAogICAgLy8gICAgIHNlbGYsIGJldF9hbW91bnQ6IFVJbnQ2NCwgcjogVUludDY0LCBob3VzZV9lZGdlX2JwczogVUludDY0CiAgICAvLyApIC0+IFVJbnQ2NDoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBDYWxjdWxhdGUgdGhlIHBheW91dCBmb3IgYSBiZXQgdXNpbmcgZHluYW1pYyBob3VzZSBlZGdlCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgYXNzZXJ0IHIgPCBNQVhfUkFORE9NX05VTUJFUiwgInJhbmRvbSBudW1iZXIgdG9vIGxhcmdlIgogICAgLy8gCiAgICAvLyAgICAgIyBVc2UgZHluYW1pYyBob3VzZSBlZGdlIGluc3RlYWQgb2YgZml4ZWQKICAgIC8vICAgICBob3VzZV9lZGdlX2JwcyA9IHNlbGYuX2dldF9keW5hbWljX2hvdXNlX2VkZ2UoYmV0X2Ftb3VudCkKICAgIC8vICAgICBzY2FsaW5nX2ZhY3RvciA9IFVJbnQ2NCgxMDAwMCkgLSBob3VzZV9lZGdlX2JwcwogICAgLy8gCiAgICAvLyAgICAgIyBXYWxrIHRocm91Z2ggZWFjaCBwYXlvdXQgb3B0aW9uIHdpdGggc2NhbGVkIHByb2JhYmlsaXRpZXMKICAgIC8vICAgICAjIEJhc2UgcHJvYmFiaWxpdGllcyB0aGF0IHR1cGxlWywgVUludDY0XXdvdWxkIGdpdmUgMTAwJSByZXR1cm4gKG5vIGhvdXNlIGVkZ2UpCiAgICAvLyAgICAgIyBmYWlyX3BheW91dHMgPSBbCiAgICAvLyAgICAgIyAgICAgKDEwMCwgMTAwMDAwMCksICAjIDElIGNoYW5jZSBmb3IgMTAweAogICAgLy8gICAgICMgICAgICg1MCwgMjAwMDAwMCksICAjIDIlIGNoYW5jZSBmb3IgNTB4CiAgICAvLyAgICAgIyAgICAgKDIwLCA1MDAwMDAwKSwgICMgNSUgY2hhbmNlIGZvciAyMHgKICAgIC8vICAgICAjICAgICAoMTAsIDEwMDAwMDAwKSwgICMgMTAlIGNoYW5jZSBmb3IgMTB4CiAgICAvLyAgICAgIyAgICAgKDUsIDIwMDAwMDAwKSwgICMgMjAlIGNoYW5jZSBmb3IgNXgKICAgIC8vICAgICAjICAgICAoMiwgNjIwMDAwMDApLCAgIyA2MiUgY2hhbmNlIGZvciAyeAogICAgLy8gICAgICMgXQogICAgLy8gICAgICMgZm9yIG11bHRpcGxpZXIsIGJhc2VfcHJvYiBpbiBmYWlyX3BheW91dHM6CiAgICAvLyAgICAgIyAgICAgc2NhbGVkX3Byb2IgPSAoYmFzZV9wcm9iICogc2NhbGluZ19mYWN0b3IpIC8vIFVJbnQ2NCgxMDAwMCkKICAgIC8vICAgICAjICAgICBpZiByIDwgc2NhbGVkX3Byb2I6CiAgICAvLyAgICAgIyAgICAgICAgIHJldHVybiBiZXRfYW1vdW50ICogbXVsdGlwbGllcgogICAgLy8gICAgICMgICAgIHIgLT0gc2NhbGVkX3Byb2IKICAgIC8vICAgICBtdWx0aXBsaWVycyA9IGFyYzQuU3RhdGljQXJyYXkoCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDEwMCksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDUwKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMjApLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgxMCksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDUpLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgyKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgcHJvYmFiaWxpdGllcyA9IGFyYzQuU3RhdGljQXJyYXkoCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDEwMDAwMDApLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgyMDAwMDAwKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoNTAwMDAwMCksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDEwMDAwMDAwKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMjAwMDAwMDApLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCg2MjAwMDAwMCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIGZvciBpbmRleCBpbiB1cmFuZ2UoNik6CiAgICAvLyAgICAgICAgIG11bHRpcGxpZXIgPSBtdWx0aXBsaWVyc1tpbmRleF0ubmF0aXZlCiAgICAvLyAgICAgICAgIGJhc2VfcHJvYiA9IHByb2JhYmlsaXRpZXNbaW5kZXhdLm5hdGl2ZQogICAgLy8gICAgICAgICBzY2FsZWRfcHJvYiA9IChiYXNlX3Byb2IgKiBzY2FsaW5nX2ZhY3RvcikgLy8gVUludDY0KDEwMDAwKQogICAgLy8gICAgICAgICBpZiByIDwgc2NhbGVkX3Byb2I6CiAgICAvLyAgICAgICAgICAgICByZXR1cm4gYmV0X2Ftb3VudCAqIG11bHRpcGxpZXIKICAgIC8vICAgICAgICAgciAtPSBzY2FsZWRfcHJvYgogICAgLy8gCiAgICAvLyAgICAgIyBJZiByIHJlbWFpbnMgYWZ0ZXIgYWxsIHBheW91dHMsIGl0J3MgYSBsb3NlCiAgICAvLyAgICAgcmV0dXJuIFVJbnQ2NCgwKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfbWF4X2JldChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBHZXQgdGhlIG1heGltdW0gYmV0IGFtb3VudAogICAgLy8gICAgICIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9nZXRfbWF4X2JldCgpKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfbWF4X2JldChzZWxmKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgQ2FsY3VsYXRlIG1heGltdW0gYmV0IGJhc2VkIG9uIGF2YWlsYWJsZSBiYWxhbmNlIGFuZCBtYXggcGF5b3V0IG11bHRpcGxpZXIKICAgIC8vICAgICBSZXR1cm5zIHRoZSBtYXhpbXVtIGFsbG93ZWQgYmV0IGluIGF0b21pYyB1bml0cwogICAgLy8gICAgICIiIgogICAgLy8gICAgICMgTWF4IGJldCA9IGF2YWlsYWJsZSBiYWxhbmNlIC8gbWF4IHBheW91dCAoMTAweCkKICAgIC8vICAgICByZXR1cm4gc2VsZi5iYWxhbmNlX2F2YWlsYWJsZSAvLyBVSW50NjQoMTAwKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBzcGluKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgYmV0X2Ftb3VudDogYXJjNC5VSW50NjQsCiAgICAvLyAgICAgaW5kZXg6IGFyYzQuVUludDY0LAogICAgLy8gICAgIGZ1dHVyZV9yb3VuZF9vZmZzZXQ6IGFyYzQuVUludDY0LAogICAgLy8gKSAtPiBCeXRlczU2OgogICAgLy8gICAgICIiIgogICAgLy8gICAgIFNwaW4gdGhlIHNsb3QgbWFjaGluZS4gT3V0Y29tZSBpcyBkZXRlcm1pbmVkIGJ5IHRoZSBzZWVkCiAgICAvLyAgICAgb2YgZnV0dXJlIHJvdW5kLgogICAgLy8gCiAgICAvLyAgICAgQXJnczoKICAgIC8vICAgICAgICAgYmV0ICh1aW50KTogVGhlIHBsYXllcidzIHdhZ2VyLgogICAgLy8gICAgICAgICBpbmRleCAodWludCk6IFVzZWQgdG8gZGV0ZXJtaW5lIHdoaWNoIDggYnl0ZXMgb2YgdGhlIGJsb2NrIHNlZWQgdG8gdXNlLgogICAgLy8gCiAgICAvLyAgICAgUmV0dXJuczoKICAgIC8vICAgICAgICAgciAodWludCk6IFRoZSByb3VuZCBudW1iZXIgb2YgdGhlIHNwaW4uCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgcmV0dXJuIEJ5dGVzNTYuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgc2VsZi5fc3BpbihiZXRfYW1vdW50Lm5hdGl2ZSwgaW5kZXgubmF0aXZlLCBmdXR1cmVfcm91bmRfb2Zmc2V0Lm5hdGl2ZSkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3NwaW4oCiAgICAvLyAgICAgc2VsZiwgYmV0X2Ftb3VudDogVUludDY0LCBpbmRleDogVUludDY0LCBmdXR1cmVfcm91bmRfb2Zmc2V0OiBVSW50NjQKICAgIC8vICkgLT4gQnl0ZXM6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgU3BpbiB0aGUgc2xvdCBtYWNoaW5lLiBPdXRjb21lIGlzIGRldGVybWluZWQgYnkgdGhlIHNlZWQKICAgIC8vICAgICBvZiBmdXR1cmUgcm91bmQuCiAgICAvLyAKICAgIC8vICAgICBBcmdzOgogICAgLy8gICAgICAgICBiZXQgKHVpbnQpOiBUaGUgcGxheWVyJ3Mgd2FnZXIuCiAgICAvLyAKICAgIC8vICAgICBSZXR1cm5zOgogICAgLy8gICAgICAgICByICh1aW50KTogVGhlIHJvdW5kIG51bWJlciBvZiB0aGUgc3Bpbi4KICAgIC8vIAogICAgLy8gICAgICIiIgogICAgLy8gICAgIGFzc2VydCBpbmRleCA8IFVJbnQ2NCgyNCksICJpbmRleCBtdXN0IGJlIGxlc3MgdGhhbiAyNCIKICAgIC8vICAgICBhc3NlcnQgYmV0X2Ftb3VudCA+PSBzZWxmLm1pbl9iZXRfYW1vdW50LCAiYmV0IGFtb3VudCB0b28gc21hbGwiCiAgICAvLyAgICAgbWF4X2JldCA9IHNlbGYuX2dldF9tYXhfYmV0KCkKICAgIC8vICAgICBhc3NlcnQgYmV0X2Ftb3VudCA8PSBtYXhfYmV0LCAiYmV0IGFtb3VudCB0b28gbGFyZ2UiCiAgICAvLyAgICAgcGF5bWVudCA9IHJlcXVpcmVfcGF5bWVudChUeG4uc2VuZGVyKQogICAgLy8gICAgIGFzc2VydCBwYXltZW50ID49IGJldF9hbW91bnQsICJwYXltZW50IGluc3VmZmljaWVudCIKICAgIC8vICAgICBleHRyYV9wYXltZW50ID0gcGF5bWVudCAtIGJldF9hbW91bnQKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBleHRyYV9wYXltZW50ID49IEJPWF9DT1NUX0JFVAogICAgLy8gICAgICksICJleHRyYSBwYXltZW50IG11c3QgYmUgZ3JlYXRlciB0aGFuIGJveCBjb3N0IgogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIGV4dHJhX3BheW1lbnQgPD0gTUFYX0VYVFJBX1BBWU1FTlQKICAgIC8vICAgICApLCAiZXh0cmEgcGF5bWVudCBtdXN0IGJlIGxlc3MgdGhhbiBtYXggZXh0cmEgcGF5bWVudCIKICAgIC8vIAogICAgLy8gICAgICMgVXBkYXRlIGJhbGFuY2UgdHJhY2tpbmcKICAgIC8vICAgICBzZWxmLmJhbGFuY2VfdG90YWwgKz0gYmV0X2Ftb3VudAogICAgLy8gICAgIHNlbGYuYmFsYW5jZV9hdmFpbGFibGUgKz0gYmV0X2Ftb3VudCAgIyBBZGQgYmV0IGFtb3VudCB0byBhdmFpbGFibGUgZmlyc3QKICAgIC8vICAgICBtYXhfcG9zc2libGVfcGF5b3V0ID0gYmV0X2Ftb3VudCAqIFVJbnQ2NChNQVhfUEFZT1VUX01VTFRJUExJRVIpCiAgICAvLyAgICAgc2VsZi5iYWxhbmNlX2xvY2tlZCArPSBtYXhfcG9zc2libGVfcGF5b3V0CiAgICAvLyAgICAgc2VsZi5iYWxhbmNlX2F2YWlsYWJsZSAtPSBtYXhfcG9zc2libGVfcGF5b3V0CiAgICAvLyAKICAgIC8vICAgICByb3VuZCA9IEdsb2JhbC5yb3VuZAogICAgLy8gICAgIGJldF9rZXkgPSBzZWxmLl9nZXRfYmV0X2tleShUeG4uc2VuZGVyLCBiZXRfYW1vdW50LCByb3VuZCwgaW5kZXgpCiAgICAvLyAgICAgYXNzZXJ0IGJldF9rZXkgbm90IGluIHNlbGYuYmV0LCAiYmV0IGFscmVhZHkgZXhpc3RzIgogICAgLy8gICAgIGNsYWltX3JvdW5kID0gcm91bmQgKyBST1VORF9GVVRVUkVfREVMVEEgKyBmdXR1cmVfcm91bmRfb2Zmc2V0CiAgICAvLyAgICAgc2VsZi5iZXRbYmV0X2tleV0gPSBCZXQoCiAgICAvLyAgICAgICAgIHdobz1hcmM0LkFkZHJlc3MoVHhuLnNlbmRlciksCiAgICAvLyAgICAgICAgIGFtb3VudD1hcmM0LlVJbnQ2NChiZXRfYW1vdW50KSwKICAgIC8vICAgICAgICAgY29uZmlybWVkX3JvdW5kPWFyYzQuVUludDY0KHJvdW5kKSwKICAgIC8vICAgICAgICAgaW5kZXg9YXJjNC5VSW50NjQoaW5kZXgpLAogICAgLy8gICAgICAgICBjbGFpbV9yb3VuZD1hcmM0LlVJbnQ2NChjbGFpbV9yb3VuZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIGFyYzQuZW1pdCgKICAgIC8vICAgICAgICAgQmV0UGxhY2VkKAogICAgLy8gICAgICAgICAgICAgd2hvPWFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKSwKICAgIC8vICAgICAgICAgICAgIGFtb3VudD1hcmM0LlVJbnQ2NChiZXRfYW1vdW50KSwKICAgIC8vICAgICAgICAgICAgIGNvbmZpcm1lZF9yb3VuZD1hcmM0LlVJbnQ2NChyb3VuZCksCiAgICAvLyAgICAgICAgICAgICBpbmRleD1hcmM0LlVJbnQ2NChpbmRleCksCiAgICAvLyAgICAgICAgICAgICBjbGFpbV9yb3VuZD1hcmM0LlVJbnQ2NChjbGFpbV9yb3VuZCksCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAgICAgcmV0dXJuIGJldF9rZXkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgY2xhaW0oc2VsZiwgYmV0X2tleTogQnl0ZXM1NikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgQ2xhaW0gYSBiZXQKICAgIC8vIAogICAgLy8gICAgIEFyZ3M6CiAgICAvLyAgICAgICAgIGJldF9rZXk6IFRoZSBrZXkgb2YgdGhlIGJldCB0byBjbGFpbQogICAgLy8gCiAgICAvLyAgICAgUmV0dXJuczoKICAgIC8vICAgICAgICAgcGF5b3V0OiBUaGUgcGF5b3V0IGZvciB0aGUgYmV0CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX2NsYWltKGJldF9rZXkuYnl0ZXMpKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jbGFpbShzZWxmLCBiZXRfa2V5OiBCeXRlcykgLT4gVUludDY0OgogICAgLy8gICAgICIiIgogICAgLy8gICAgIENsYWltIGEgYmV0CiAgICAvLyAgICAgQXJnczoKICAgIC8vICAgICAgICAgYmV0X2tleTogVGhlIGtleSBvZiB0aGUgYmV0IHRvIGNsYWltCiAgICAvLyAKICAgIC8vICAgICBSZXR1cm5zOgogICAgLy8gICAgICAgICBwYXlvdXQ6IFRoZSBwYXlvdXQgZm9yIHRoZSBiZXQKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBhc3NlcnQgYmV0X2tleSBpbiBzZWxmLmJldCwgImJldCBub3QgZm91bmQiCiAgICBmcmFtZV9kaWcgLTEKICAgIGJveF9sZW4KICAgIGJ1cnkgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODIKICAgIC8vIGFzc2VydCBiZXRfa2V5IGluIHNlbGYuYmV0LCAiYmV0IG5vdCBmb3VuZCIKICAgIGFzc2VydCAvLyBiZXQgbm90IGZvdW5kCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4MwogICAgLy8gYmV0ID0gc2VsZi5iZXRbYmV0X2tleV0uY29weSgpCiAgICBmcmFtZV9kaWcgLTEKICAgIGJveF9nZXQKICAgIHN3YXAKICAgIGR1cAogICAgdW5jb3ZlciAyCiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5iZXQgZW50cnkgZXhpc3RzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NC0zODYKICAgIC8vICMgaWYgcm91bmQgaXMgZ3JlYXRlciB0aGFuIGNsYWltX3JvdW5kICsgTUFYX0NMQUlNX1JPVU5EX0RFTFRBLCB0aGUgYmV0IGlzIGV4cGlyZWQKICAgIC8vICMgYW5kIHdlIGNhbiByZXR1cm4gdGhlIGJveCBjb3N0IHRvIHRoZSBzZW5kZXIKICAgIC8vIGlmIEdsb2JhbC5yb3VuZCA+IGJldC5jbGFpbV9yb3VuZC5uYXRpdmUgKyBVSW50NjQoTUFYX0NMQUlNX1JPVU5EX0RFTFRBKToKICAgIGdsb2JhbCBSb3VuZAogICAgc3dhcAogICAgZXh0cmFjdCA1NiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZHVwCiAgICBjb3ZlciAyCiAgICBidG9pCiAgICBkdXAKICAgIGNvdmVyIDIKICAgIGludCAxMDAwCiAgICArCiAgICA+CiAgICBieiBfY2xhaW1fZWxzZV9ib2R5QDMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg3CiAgICAvLyBkZWwgc2VsZi5iZXRbYmV0X2tleV0KICAgIGZyYW1lX2RpZyAtMQogICAgYm94X2RlbAogICAgcG9wCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4OC0zODkKICAgIC8vICMgUmVsZWFzZSBsb2NrZWQgYmFsYW5jZSB3aGVuIGJldCBleHBpcmVzCiAgICAvLyBtYXhfcG9zc2libGVfcGF5b3V0ID0gYmV0LmFtb3VudC5uYXRpdmUgKiBVSW50NjQoTUFYX1BBWU9VVF9NVUxUSVBMSUVSKQogICAgZnJhbWVfZGlnIDMKICAgIGR1cAogICAgZXh0cmFjdCAzMiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZHVwCiAgICBidG9pCiAgICBpbnQgMTAwCiAgICAqCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MAogICAgLy8gc2VsZi5iYWxhbmNlX2xvY2tlZCAtPSBtYXhfcG9zc2libGVfcGF5b3V0CiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4MwogICAgLy8gc2VsZi5iYWxhbmNlX2xvY2tlZCA9IFVJbnQ2NCgpCiAgICBieXRlICJiYWxhbmNlX2xvY2tlZCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkwCiAgICAvLyBzZWxmLmJhbGFuY2VfbG9ja2VkIC09IG1heF9wb3NzaWJsZV9wYXlvdXQKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5iYWxhbmNlX2xvY2tlZCBleGlzdHMKICAgIGRpZyAxCiAgICAtCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjgzCiAgICAvLyBzZWxmLmJhbGFuY2VfbG9ja2VkID0gVUludDY0KCkKICAgIGJ5dGUgImJhbGFuY2VfbG9ja2VkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTAKICAgIC8vIHNlbGYuYmFsYW5jZV9sb2NrZWQgLT0gbWF4X3Bvc3NpYmxlX3BheW91dAogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkxCiAgICAvLyBzZWxmLmJhbGFuY2VfYXZhaWxhYmxlICs9IG1heF9wb3NzaWJsZV9wYXlvdXQKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjgyCiAgICAvLyBzZWxmLmJhbGFuY2VfYXZhaWxhYmxlID0gVUludDY0KCkKICAgIGJ5dGUgImJhbGFuY2VfYXZhaWxhYmxlIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTEKICAgIC8vIHNlbGYuYmFsYW5jZV9hdmFpbGFibGUgKz0gbWF4X3Bvc3NpYmxlX3BheW91dAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLmJhbGFuY2VfYXZhaWxhYmxlIGV4aXN0cwogICAgKwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4MgogICAgLy8gc2VsZi5iYWxhbmNlX2F2YWlsYWJsZSA9IFVJbnQ2NCgpCiAgICBieXRlICJiYWxhbmNlX2F2YWlsYWJsZSIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkxCiAgICAvLyBzZWxmLmJhbGFuY2VfYXZhaWxhYmxlICs9IG1heF9wb3NzaWJsZV9wYXlvdXQKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MwogICAgLy8gaXR4bi5QYXltZW50KHJlY2VpdmVyPVR4bi5zZW5kZXIsIGFtb3VudD1CT1hfQ09TVF9CRVQpLnN1Ym1pdCgpCiAgICBpdHhuX2JlZ2luCiAgICB0eG4gU2VuZGVyCiAgICBpbnQgMzc3MDAKICAgIGl0eG5fZmllbGQgQW1vdW50CiAgICBpdHhuX2ZpZWxkIFJlY2VpdmVyCiAgICBpbnQgcGF5CiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICBpbnQgMAogICAgaXR4bl9maWVsZCBGZWUKICAgIGl0eG5fc3VibWl0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5NgogICAgLy8gd2hvPWJldC53aG8sCiAgICBkaWcgMQogICAgZXh0cmFjdCAwIDMyIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTgKICAgIC8vIGNvbmZpcm1lZF9yb3VuZD1iZXQuY29uZmlybWVkX3JvdW5kLAogICAgZGlnIDIKICAgIGV4dHJhY3QgNDAgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGNvdmVyIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk5CiAgICAvLyBpbmRleD1iZXQuaW5kZXgsCiAgICB1bmNvdmVyIDMKICAgIGV4dHJhY3QgNDggOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGNvdmVyIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk1LTQwMgogICAgLy8gQmV0Q2xhaW1lZCgKICAgIC8vICAgICB3aG89YmV0LndobywKICAgIC8vICAgICBhbW91bnQ9YmV0LmFtb3VudCwKICAgIC8vICAgICBjb25maXJtZWRfcm91bmQ9YmV0LmNvbmZpcm1lZF9yb3VuZCwKICAgIC8vICAgICBpbmRleD1iZXQuaW5kZXgsCiAgICAvLyAgICAgY2xhaW1fcm91bmQ9YmV0LmNsYWltX3JvdW5kLAogICAgLy8gICAgIHBheW91dD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICkKICAgIGNvbmNhdAogICAgdW5jb3ZlciAyCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgZnJhbWVfZGlnIDQKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDEKICAgIC8vIHBheW91dD1hcmM0LlVJbnQ2NCgwKSwKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5NS00MDIKICAgIC8vIEJldENsYWltZWQoCiAgICAvLyAgICAgd2hvPWJldC53aG8sCiAgICAvLyAgICAgYW1vdW50PWJldC5hbW91bnQsCiAgICAvLyAgICAgY29uZmlybWVkX3JvdW5kPWJldC5jb25maXJtZWRfcm91bmQsCiAgICAvLyAgICAgaW5kZXg9YmV0LmluZGV4LAogICAgLy8gICAgIGNsYWltX3JvdW5kPWJldC5jbGFpbV9yb3VuZCwKICAgIC8vICAgICBwYXlvdXQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyApCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk0LTQwMwogICAgLy8gYXJjNC5lbWl0KAogICAgLy8gICAgIEJldENsYWltZWQoCiAgICAvLyAgICAgICAgIHdobz1iZXQud2hvLAogICAgLy8gICAgICAgICBhbW91bnQ9YmV0LmFtb3VudCwKICAgIC8vICAgICAgICAgY29uZmlybWVkX3JvdW5kPWJldC5jb25maXJtZWRfcm91bmQsCiAgICAvLyAgICAgICAgIGluZGV4PWJldC5pbmRleCwKICAgIC8vICAgICAgICAgY2xhaW1fcm91bmQ9YmV0LmNsYWltX3JvdW5kLAogICAgLy8gICAgICAgICBwYXlvdXQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgKQogICAgLy8gKQogICAgbWV0aG9kICJCZXRDbGFpbWVkKGFkZHJlc3MsdWludDY0LHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ2NCkiCiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDQKICAgIC8vIHJldHVybiBVSW50NjQoMCkKICAgIGludCAwCiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKX2NsYWltX2Vsc2VfYm9keUAzOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDgtNDA5CiAgICAvLyAjIENhbGN1bGF0ZSBzdGFydCBwb3NpdGlvbiBiYXNlZCBvbiBpbmRleCAoZWFjaCBzbGljZSBpcyA4IGJ5dGVzKQogICAgLy8gc3RhcnRfcG9zID0gYmV0LmluZGV4Lm5hdGl2ZQogICAgZnJhbWVfZGlnIDMKICAgIGR1cAogICAgZXh0cmFjdCA0OCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZHVwCiAgICBmcmFtZV9idXJ5IDAKICAgIGJ0b2kKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDEyCiAgICAvLyBzZWxmLl9nZXRfYmxvY2tfc2VlZChiZXQuY2xhaW1fcm91bmQubmF0aXZlKVsKICAgIGZyYW1lX2RpZyA1CiAgICBjYWxsc3ViIF9nZXRfYmxvY2tfc2VlZAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTItNDE0CiAgICAvLyBzZWxmLl9nZXRfYmxvY2tfc2VlZChiZXQuY2xhaW1fcm91bmQubmF0aXZlKVsKICAgIC8vICAgICBzdGFydF9wb3MgOiBzdGFydF9wb3MgKyBVSW50NjQoOCkKICAgIC8vIF0KICAgIGR1cAogICAgbGVuCiAgICBkaWcgMgogICAgZGlnIDEKICAgID49CiAgICBkaWcgMwogICAgZGlnIDIKICAgIHVuY292ZXIgMgogICAgc2VsZWN0CiAgICBjb3ZlciAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxMwogICAgLy8gc3RhcnRfcG9zIDogc3RhcnRfcG9zICsgVUludDY0KDgpCiAgICB1bmNvdmVyIDMKICAgIGludCA4CiAgICArCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxMi00MTQKICAgIC8vIHNlbGYuX2dldF9ibG9ja19zZWVkKGJldC5jbGFpbV9yb3VuZC5uYXRpdmUpWwogICAgLy8gICAgIHN0YXJ0X3BvcyA6IHN0YXJ0X3BvcyArIFVJbnQ2NCg4KQogICAgLy8gXQogICAgZHVwCiAgICBkaWcgMgogICAgPj0KICAgIHN3YXAKICAgIGNvdmVyIDIKICAgIHNlbGVjdAogICAgZHVwCiAgICBkaWcgMwogICAgPAogICAgZGlnIDMKICAgIHN3YXAKICAgIHNlbGVjdAogICAgc3dhcAogICAgY292ZXIgMgogICAgc3Vic3RyaW5nMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTEtNDE1CiAgICAvLyBhcmM0LlVJbnQ2NC5mcm9tX2J5dGVzKAogICAgLy8gICAgIHNlbGYuX2dldF9ibG9ja19zZWVkKGJldC5jbGFpbV9yb3VuZC5uYXRpdmUpWwogICAgLy8gICAgICAgICBzdGFydF9wb3MgOiBzdGFydF9wb3MgKyBVSW50NjQoOCkKICAgIC8vICAgICBdCiAgICAvLyApLm5hdGl2ZQogICAgYnRvaQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTYKICAgIC8vICUgTUFYX1JBTkRPTV9OVU1CRVIKICAgIGludCAxMDAwMDAwMDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDExLTQxNgogICAgLy8gYXJjNC5VSW50NjQuZnJvbV9ieXRlcygKICAgIC8vICAgICBzZWxmLl9nZXRfYmxvY2tfc2VlZChiZXQuY2xhaW1fcm91bmQubmF0aXZlKVsKICAgIC8vICAgICAgICAgc3RhcnRfcG9zIDogc3RhcnRfcG9zICsgVUludDY0KDgpCiAgICAvLyAgICAgXQogICAgLy8gKS5uYXRpdmUKICAgIC8vICUgTUFYX1JBTkRPTV9OVU1CRVIKICAgICUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDE5CiAgICAvLyBiZXQuYW1vdW50Lm5hdGl2ZSwgciwgc2VsZi5iYXNlX2hvdXNlX2VkZ2VfYnBzCiAgICBzd2FwCiAgICBleHRyYWN0IDMyIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBkdXAKICAgIGZyYW1lX2J1cnkgMQogICAgYnRvaQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODUtODYKICAgIC8vICMgRGVmaW5lIGJhc2UgYW5kIG1heCBob3VzZSBlZGdlCiAgICAvLyBzZWxmLmJhc2VfaG91c2VfZWRnZV9icHMgPSBVSW50NjQoNzAwMCkgICMgNzAlIGJhc2UgZWRnZSAoZGVmYXVsdCA1Ni40MSUpCiAgICBieXRlICJiYXNlX2hvdXNlX2VkZ2VfYnBzIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTkKICAgIC8vIGJldC5hbW91bnQubmF0aXZlLCByLCBzZWxmLmJhc2VfaG91c2VfZWRnZV9icHMKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5iYXNlX2hvdXNlX2VkZ2VfYnBzIGV4aXN0cwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTgtNDIwCiAgICAvLyBwYXlvdXQgPSBzZWxmLl9jYWxjdWxhdGVfYmV0X3BheW91dCgKICAgIC8vICAgICBiZXQuYW1vdW50Lm5hdGl2ZSwgciwgc2VsZi5iYXNlX2hvdXNlX2VkZ2VfYnBzCiAgICAvLyApCiAgICBkaWcgMQogICAgdW5jb3ZlciAzCiAgICB1bmNvdmVyIDIKICAgIGNhbGxzdWIgX2NhbGN1bGF0ZV9iZXRfcGF5b3V0CiAgICBkdXAKICAgIGNvdmVyIDIKICAgIGZyYW1lX2J1cnkgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjEtNDIyCiAgICAvLyAjIFJlbGVhc2UgbG9ja2VkIGJhbGFuY2UgYW5kIGFkanVzdCBhdmFpbGFibGUgYmFsYW5jZQogICAgLy8gbWF4X3Bvc3NpYmxlX3BheW91dCA9IGJldC5hbW91bnQubmF0aXZlICogVUludDY0KE1BWF9QQVlPVVRfTVVMVElQTElFUikKICAgIGludCAxMDAKICAgICoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDIzCiAgICAvLyBzZWxmLmJhbGFuY2VfbG9ja2VkIC09IG1heF9wb3NzaWJsZV9wYXlvdXQKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjgzCiAgICAvLyBzZWxmLmJhbGFuY2VfbG9ja2VkID0gVUludDY0KCkKICAgIGJ5dGUgImJhbGFuY2VfbG9ja2VkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjMKICAgIC8vIHNlbGYuYmFsYW5jZV9sb2NrZWQgLT0gbWF4X3Bvc3NpYmxlX3BheW91dAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLmJhbGFuY2VfbG9ja2VkIGV4aXN0cwogICAgZGlnIDEKICAgIC0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODMKICAgIC8vIHNlbGYuYmFsYW5jZV9sb2NrZWQgPSBVSW50NjQoKQogICAgYnl0ZSAiYmFsYW5jZV9sb2NrZWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyMwogICAgLy8gc2VsZi5iYWxhbmNlX2xvY2tlZCAtPSBtYXhfcG9zc2libGVfcGF5b3V0CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjQKICAgIC8vIHNlbGYuYmFsYW5jZV9hdmFpbGFibGUgKz0gKAogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODIKICAgIC8vIHNlbGYuYmFsYW5jZV9hdmFpbGFibGUgPSBVSW50NjQoKQogICAgYnl0ZSAiYmFsYW5jZV9hdmFpbGFibGUiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyNAogICAgLy8gc2VsZi5iYWxhbmNlX2F2YWlsYWJsZSArPSAoCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuYmFsYW5jZV9hdmFpbGFibGUgZXhpc3RzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyNQogICAgLy8gbWF4X3Bvc3NpYmxlX3BheW91dCAtIHBheW91dAogICAgc3dhcAogICAgZGlnIDIKICAgIC0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDI0LTQyNgogICAgLy8gc2VsZi5iYWxhbmNlX2F2YWlsYWJsZSArPSAoCiAgICAvLyAgICAgbWF4X3Bvc3NpYmxlX3BheW91dCAtIHBheW91dAogICAgLy8gKSAgIyBSZWxlYXNlIGxvY2tlZCBmdW5kcyBtaW51cyBwYXlvdXQKICAgICsKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODIKICAgIC8vIHNlbGYuYmFsYW5jZV9hdmFpbGFibGUgPSBVSW50NjQoKQogICAgYnl0ZSAiYmFsYW5jZV9hdmFpbGFibGUiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyNC00MjYKICAgIC8vIHNlbGYuYmFsYW5jZV9hdmFpbGFibGUgKz0gKAogICAgLy8gICAgIG1heF9wb3NzaWJsZV9wYXlvdXQgLSBwYXlvdXQKICAgIC8vICkgICMgUmVsZWFzZSBsb2NrZWQgZnVuZHMgbWludXMgcGF5b3V0CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjcKICAgIC8vIHNlbGYuYmFsYW5jZV90b3RhbCAtPSBwYXlvdXQgICMgUmVkdWNlIHRvdGFsIGJhbGFuY2UgYnkgcGF5b3V0IGFtb3VudAogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODAtODEKICAgIC8vICMgc2xvdCBtYWNoaW5lIHN0YXRlCiAgICAvLyBzZWxmLmJhbGFuY2VfdG90YWwgPSBVSW50NjQoKQogICAgYnl0ZSAiYmFsYW5jZV90b3RhbCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDI3CiAgICAvLyBzZWxmLmJhbGFuY2VfdG90YWwgLT0gcGF5b3V0ICAjIFJlZHVjZSB0b3RhbCBiYWxhbmNlIGJ5IHBheW91dCBhbW91bnQKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5iYWxhbmNlX3RvdGFsIGV4aXN0cwogICAgZGlnIDEKICAgIC0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODAtODEKICAgIC8vICMgc2xvdCBtYWNoaW5lIHN0YXRlCiAgICAvLyBzZWxmLmJhbGFuY2VfdG90YWwgPSBVSW50NjQoKQogICAgYnl0ZSAiYmFsYW5jZV90b3RhbCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDI3CiAgICAvLyBzZWxmLmJhbGFuY2VfdG90YWwgLT0gcGF5b3V0ICAjIFJlZHVjZSB0b3RhbCBiYWxhbmNlIGJ5IHBheW91dCBhbW91bnQKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyOQogICAgLy8gaWYgcGF5b3V0ID4gMDoKICAgIGJ6IF9jbGFpbV9hZnRlcl9pZl9lbHNlQDYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDMwCiAgICAvLyBpdHhuLlBheW1lbnQocmVjZWl2ZXI9YmV0Lndoby5uYXRpdmUsIGFtb3VudD1wYXlvdXQpLnN1Ym1pdCgpCiAgICBpdHhuX2JlZ2luCiAgICBmcmFtZV9kaWcgMwogICAgZXh0cmFjdCAwIDMyIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZnJhbWVfZGlnIDIKICAgIGl0eG5fZmllbGQgQW1vdW50CiAgICBpdHhuX2ZpZWxkIFJlY2VpdmVyCiAgICBpbnQgcGF5CiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICBpbnQgMAogICAgaXR4bl9maWVsZCBGZWUKICAgIGl0eG5fc3VibWl0CgpfY2xhaW1fYWZ0ZXJfaWZfZWxzZUA2OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzEKICAgIC8vIGRlbCBzZWxmLmJldFtiZXRfa2V5XQogICAgZnJhbWVfZGlnIC0xCiAgICBib3hfZGVsCiAgICBwb3AKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDMyCiAgICAvLyBpdHhuLlBheW1lbnQocmVjZWl2ZXI9VHhuLnNlbmRlciwgYW1vdW50PUJPWF9DT1NUX0JFVCkuc3VibWl0KCkKICAgIGl0eG5fYmVnaW4KICAgIHR4biBTZW5kZXIKICAgIGludCAzNzcwMAogICAgaXR4bl9maWVsZCBBbW91bnQKICAgIGl0eG5fZmllbGQgUmVjZWl2ZXIKICAgIGludCBwYXkKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIGludCAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgaXR4bl9zdWJtaXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDM1CiAgICAvLyB3aG89YmV0LndobywKICAgIGZyYW1lX2RpZyAzCiAgICBkdXAKICAgIGV4dHJhY3QgMCAzMiAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDM3CiAgICAvLyBjb25maXJtZWRfcm91bmQ9YmV0LmNvbmZpcm1lZF9yb3VuZCwKICAgIGV4dHJhY3QgNDAgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQwCiAgICAvLyBwYXlvdXQ9YXJjNC5VSW50NjQocGF5b3V0KSwKICAgIGZyYW1lX2RpZyAyCiAgICBkdXAKICAgIGNvdmVyIDMKICAgIGl0b2IKICAgIGNvdmVyIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDM0LTQ0MQogICAgLy8gQmV0Q2xhaW1lZCgKICAgIC8vICAgICB3aG89YmV0LndobywKICAgIC8vICAgICBhbW91bnQ9YmV0LmFtb3VudCwKICAgIC8vICAgICBjb25maXJtZWRfcm91bmQ9YmV0LmNvbmZpcm1lZF9yb3VuZCwKICAgIC8vICAgICBpbmRleD1iZXQuaW5kZXgsCiAgICAvLyAgICAgY2xhaW1fcm91bmQ9YmV0LmNsYWltX3JvdW5kLAogICAgLy8gICAgIHBheW91dD1hcmM0LlVJbnQ2NChwYXlvdXQpLAogICAgLy8gKQogICAgZnJhbWVfZGlnIDEKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICBmcmFtZV9kaWcgMAogICAgY29uY2F0CiAgICBmcmFtZV9kaWcgNAogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDMzLTQ0MgogICAgLy8gYXJjNC5lbWl0KAogICAgLy8gICAgIEJldENsYWltZWQoCiAgICAvLyAgICAgICAgIHdobz1iZXQud2hvLAogICAgLy8gICAgICAgICBhbW91bnQ9YmV0LmFtb3VudCwKICAgIC8vICAgICAgICAgY29uZmlybWVkX3JvdW5kPWJldC5jb25maXJtZWRfcm91bmQsCiAgICAvLyAgICAgICAgIGluZGV4PWJldC5pbmRleCwKICAgIC8vICAgICAgICAgY2xhaW1fcm91bmQ9YmV0LmNsYWltX3JvdW5kLAogICAgLy8gICAgICAgICBwYXlvdXQ9YXJjNC5VSW50NjQocGF5b3V0KSwKICAgIC8vICAgICApCiAgICAvLyApCiAgICBtZXRob2QgIkJldENsYWltZWQoYWRkcmVzcyx1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50NjQsdWludDY0KSIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0MwogICAgLy8gcmV0dXJuIHBheW91dAogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fY2FsY3VsYXRlX2JldF9wYXlvdXQoYmV0X2Ftb3VudDogdWludDY0LCByOiB1aW50NjQsIGhvdXNlX2VkZ2VfYnBzOiB1aW50NjQpIC0+IHVpbnQ2NDoKX2NhbGN1bGF0ZV9iZXRfcGF5b3V0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyMDgtMjExCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jYWxjdWxhdGVfYmV0X3BheW91dCgKICAgIC8vICAgICBzZWxmLCBiZXRfYW1vdW50OiBVSW50NjQsIHI6IFVJbnQ2NCwgaG91c2VfZWRnZV9icHM6IFVJbnQ2NAogICAgLy8gKSAtPiBVSW50NjQ6CiAgICBwcm90byAzIDEKICAgIGJ5dGUgIiIKICAgIGR1cAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyMTUKICAgIC8vIGFzc2VydCByIDwgTUFYX1JBTkRPTV9OVU1CRVIsICJyYW5kb20gbnVtYmVyIHRvbyBsYXJnZSIKICAgIGZyYW1lX2RpZyAtMgogICAgaW50IDEwMDAwMDAwMAogICAgPAogICAgYXNzZXJ0IC8vIHJhbmRvbSBudW1iZXIgdG9vIGxhcmdlCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjIxNy0yMTgKICAgIC8vICMgVXNlIGR5bmFtaWMgaG91c2UgZWRnZSBpbnN0ZWFkIG9mIGZpeGVkCiAgICAvLyBob3VzZV9lZGdlX2JwcyA9IHNlbGYuX2dldF9keW5hbWljX2hvdXNlX2VkZ2UoYmV0X2Ftb3VudCkKICAgIGZyYW1lX2RpZyAtMwogICAgY2FsbHN1YiBfZ2V0X2R5bmFtaWNfaG91c2VfZWRnZQogICAgZnJhbWVfYnVyeSAtMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyMTkKICAgIC8vIHNjYWxpbmdfZmFjdG9yID0gVUludDY0KDEwMDAwKSAtIGhvdXNlX2VkZ2VfYnBzCiAgICBpbnQgMTAwMDAKICAgIGZyYW1lX2RpZyAtMQogICAgLQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyNTIKICAgIC8vIGZvciBpbmRleCBpbiB1cmFuZ2UoNik6CiAgICBpbnQgMAoKX2NhbGN1bGF0ZV9iZXRfcGF5b3V0X2Zvcl9oZWFkZXJAMToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjUyCiAgICAvLyBmb3IgaW5kZXggaW4gdXJhbmdlKDYpOgogICAgZnJhbWVfZGlnIDMKICAgIGludCA2CiAgICA8CiAgICBieiBfY2FsY3VsYXRlX2JldF9wYXlvdXRfYWZ0ZXJfZm9yQDYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjUzCiAgICAvLyBtdWx0aXBsaWVyID0gbXVsdGlwbGllcnNbaW5kZXhdLm5hdGl2ZQogICAgZnJhbWVfZGlnIDMKICAgIGludCA4CiAgICAqCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjIyMS0yNDMKICAgIC8vICMgV2FsayB0aHJvdWdoIGVhY2ggcGF5b3V0IG9wdGlvbiB3aXRoIHNjYWxlZCBwcm9iYWJpbGl0aWVzCiAgICAvLyAjIEJhc2UgcHJvYmFiaWxpdGllcyB0aGF0IHR1cGxlWywgVUludDY0XXdvdWxkIGdpdmUgMTAwJSByZXR1cm4gKG5vIGhvdXNlIGVkZ2UpCiAgICAvLyAjIGZhaXJfcGF5b3V0cyA9IFsKICAgIC8vICMgICAgICgxMDAsIDEwMDAwMDApLCAgIyAxJSBjaGFuY2UgZm9yIDEwMHgKICAgIC8vICMgICAgICg1MCwgMjAwMDAwMCksICAjIDIlIGNoYW5jZSBmb3IgNTB4CiAgICAvLyAjICAgICAoMjAsIDUwMDAwMDApLCAgIyA1JSBjaGFuY2UgZm9yIDIweAogICAgLy8gIyAgICAgKDEwLCAxMDAwMDAwMCksICAjIDEwJSBjaGFuY2UgZm9yIDEweAogICAgLy8gIyAgICAgKDUsIDIwMDAwMDAwKSwgICMgMjAlIGNoYW5jZSBmb3IgNXgKICAgIC8vICMgICAgICgyLCA2MjAwMDAwMCksICAjIDYyJSBjaGFuY2UgZm9yIDJ4CiAgICAvLyAjIF0KICAgIC8vICMgZm9yIG11bHRpcGxpZXIsIGJhc2VfcHJvYiBpbiBmYWlyX3BheW91dHM6CiAgICAvLyAjICAgICBzY2FsZWRfcHJvYiA9IChiYXNlX3Byb2IgKiBzY2FsaW5nX2ZhY3RvcikgLy8gVUludDY0KDEwMDAwKQogICAgLy8gIyAgICAgaWYgciA8IHNjYWxlZF9wcm9iOgogICAgLy8gIyAgICAgICAgIHJldHVybiBiZXRfYW1vdW50ICogbXVsdGlwbGllcgogICAgLy8gIyAgICAgciAtPSBzY2FsZWRfcHJvYgogICAgLy8gbXVsdGlwbGllcnMgPSBhcmM0LlN0YXRpY0FycmF5KAogICAgLy8gICAgIGFyYzQuVUludDY0KDEwMCksCiAgICAvLyAgICAgYXJjNC5VSW50NjQoNTApLAogICAgLy8gICAgIGFyYzQuVUludDY0KDIwKSwKICAgIC8vICAgICBhcmM0LlVJbnQ2NCgxMCksCiAgICAvLyAgICAgYXJjNC5VSW50NjQoNSksCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyApCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDA2NDAwMDAwMDAwMDAwMDAwMzIwMDAwMDAwMDAwMDAwMDE0MDAwMDAwMDAwMDAwMDAwYTAwMDAwMDAwMDAwMDAwMDUwMDAwMDAwMDAwMDAwMDAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI1MwogICAgLy8gbXVsdGlwbGllciA9IG11bHRpcGxpZXJzW2luZGV4XS5uYXRpdmUKICAgIGRpZyAxCiAgICBpbnQgOAogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBmcmFtZV9idXJ5IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjQ0LTI1MQogICAgLy8gcHJvYmFiaWxpdGllcyA9IGFyYzQuU3RhdGljQXJyYXkoCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMTAwMDAwMCksCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMjAwMDAwMCksCiAgICAvLyAgICAgYXJjNC5VSW50NjQoNTAwMDAwMCksCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMTAwMDAwMDApLAogICAgLy8gICAgIGFyYzQuVUludDY0KDIwMDAwMDAwKSwKICAgIC8vICAgICBhcmM0LlVJbnQ2NCg2MjAwMDAwMCksCiAgICAvLyApCiAgICBieXRlIDB4MDAwMDAwMDAwMDBmNDI0MDAwMDAwMDAwMDAxZTg0ODAwMDAwMDAwMDAwNGM0YjQwMDAwMDAwMDAwMDk4OTY4MDAwMDAwMDAwMDEzMTJkMDAwMDAwMDAwMDAzYjIwYjgwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI1NAogICAgLy8gYmFzZV9wcm9iID0gcHJvYmFiaWxpdGllc1tpbmRleF0ubmF0aXZlCiAgICBzd2FwCiAgICBpbnQgOAogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI1NQogICAgLy8gc2NhbGVkX3Byb2IgPSAoYmFzZV9wcm9iICogc2NhbGluZ19mYWN0b3IpIC8vIFVJbnQ2NCgxMDAwMCkKICAgIGZyYW1lX2RpZyAyCiAgICAqCiAgICBpbnQgMTAwMDAKICAgIC8KICAgIGR1cAogICAgZnJhbWVfYnVyeSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI1NgogICAgLy8gaWYgciA8IHNjYWxlZF9wcm9iOgogICAgZnJhbWVfZGlnIC0yCiAgICA+CiAgICBieiBfY2FsY3VsYXRlX2JldF9wYXlvdXRfYWZ0ZXJfaWZfZWxzZUA0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI1NwogICAgLy8gcmV0dXJuIGJldF9hbW91bnQgKiBtdWx0aXBsaWVyCiAgICBmcmFtZV9kaWcgLTMKICAgIGZyYW1lX2RpZyAwCiAgICAqCiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKX2NhbGN1bGF0ZV9iZXRfcGF5b3V0X2FmdGVyX2lmX2Vsc2VANDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjU4CiAgICAvLyByIC09IHNjYWxlZF9wcm9iCiAgICBmcmFtZV9kaWcgLTIKICAgIGZyYW1lX2RpZyAxCiAgICAtCiAgICBmcmFtZV9idXJ5IC0yCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI1MgogICAgLy8gZm9yIGluZGV4IGluIHVyYW5nZSg2KToKICAgIGZyYW1lX2RpZyAzCiAgICBpbnQgMQogICAgKwogICAgZnJhbWVfYnVyeSAzCiAgICBiIF9jYWxjdWxhdGVfYmV0X3BheW91dF9mb3JfaGVhZGVyQDEKCl9jYWxjdWxhdGVfYmV0X3BheW91dF9hZnRlcl9mb3JANjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjYwLTI2MQogICAgLy8gIyBJZiByIHJlbWFpbnMgYWZ0ZXIgYWxsIHBheW91dHMsIGl0J3MgYSBsb3NlCiAgICAvLyByZXR1cm4gVUludDY0KDApCiAgICBpbnQgMAogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZ2V0X2R5bmFtaWNfaG91c2VfZWRnZShiZXRfYW1vdW50OiB1aW50NjQpIC0+IHVpbnQ2NDoKX2dldF9keW5hbWljX2hvdXNlX2VkZ2U6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE3Mi0xNzMKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9keW5hbWljX2hvdXNlX2VkZ2Uoc2VsZiwgYmV0X2Ftb3VudDogVUludDY0KSAtPiBVSW50NjQ6CiAgICBwcm90byAxIDEKICAgIGJ5dGUgIiIKICAgIGR1cG4gMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNzgtMTc5CiAgICAvLyAjIFVzZSBiYWxhbmNlX2F2YWlsYWJsZSBpbnN0ZWFkIG9mIHRvdGFsIGNvbnRyYWN0IGJhbGFuY2UKICAgIC8vIGNvbnRyYWN0X2JhbGFuY2UgPSBzZWxmLmJhbGFuY2VfYXZhaWxhYmxlCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4MgogICAgLy8gc2VsZi5iYWxhbmNlX2F2YWlsYWJsZSA9IFVJbnQ2NCgpCiAgICBieXRlICJiYWxhbmNlX2F2YWlsYWJsZSIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTc4LTE3OQogICAgLy8gIyBVc2UgYmFsYW5jZV9hdmFpbGFibGUgaW5zdGVhZCBvZiB0b3RhbCBjb250cmFjdCBiYWxhbmNlCiAgICAvLyBjb250cmFjdF9iYWxhbmNlID0gc2VsZi5iYWxhbmNlX2F2YWlsYWJsZQogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIHN3YXAKICAgIGR1cAogICAgdW5jb3ZlciAyCiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5iYWxhbmNlX2F2YWlsYWJsZSBleGlzdHMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTgxLTE4MgogICAgLy8gIyBSZXR1cm4gbWF4aW11bSBob3VzZSBlZGdlIGlmIGNvbnRyYWN0IGJhbGFuY2UgaXMgdG9vIGxvdwogICAgLy8gaWYgY29udHJhY3RfYmFsYW5jZSA8PSBiZXRfYW1vdW50OgogICAgZnJhbWVfZGlnIC0xCiAgICA8PQogICAgYnogX2dldF9keW5hbWljX2hvdXNlX2VkZ2VfYWZ0ZXJfaWZfZWxzZUAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE4MwogICAgLy8gcmV0dXJuIHNlbGYubWF4X2hvdXNlX2VkZ2VfYnBzCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4NwogICAgLy8gc2VsZi5tYXhfaG91c2VfZWRnZV9icHMgPSBVSW50NjQoOTAwMCkgICMgOTAlIG1heGltdW0gZWRnZQogICAgYnl0ZSAibWF4X2hvdXNlX2VkZ2VfYnBzIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxODMKICAgIC8vIHJldHVybiBzZWxmLm1heF9ob3VzZV9lZGdlX2JwcwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLm1heF9ob3VzZV9lZGdlX2JwcyBleGlzdHMKICAgIGZyYW1lX2J1cnkgMAogICAgcmV0c3ViCgpfZ2V0X2R5bmFtaWNfaG91c2VfZWRnZV9hZnRlcl9pZl9lbHNlQDI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE4NS0xODYKICAgIC8vICMgQ2FsY3VsYXRlIHJpc2sgcmF0aW8gKGJldCBhbW91bnQgYXMgcGVyY2VudGFnZSBvZiBiYWxhbmNlLCBpbiBiYXNpcyBwb2ludHMpCiAgICAvLyByaXNrX3JhdGlvID0gKGJldF9hbW91bnQgKiBVSW50NjQoMTAwMDApKSAvLyBjb250cmFjdF9iYWxhbmNlCiAgICBmcmFtZV9kaWcgLTEKICAgIGludCAxMDAwMAogICAgKgogICAgZnJhbWVfZGlnIDMKICAgIC8KICAgIGR1cAogICAgZnJhbWVfYnVyeSAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE4OC0xODkKICAgIC8vICMgU3RhcnQgd2l0aCBiYXNlIGhvdXNlIGVkZ2UKICAgIC8vIGR5bmFtaWNfZWRnZSA9IHNlbGYuYmFzZV9ob3VzZV9lZGdlX2JwcwogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODUtODYKICAgIC8vICMgRGVmaW5lIGJhc2UgYW5kIG1heCBob3VzZSBlZGdlCiAgICAvLyBzZWxmLmJhc2VfaG91c2VfZWRnZV9icHMgPSBVSW50NjQoNzAwMCkgICMgNzAlIGJhc2UgZWRnZSAoZGVmYXVsdCA1Ni40MSUpCiAgICBieXRlICJiYXNlX2hvdXNlX2VkZ2VfYnBzIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxODgtMTg5CiAgICAvLyAjIFN0YXJ0IHdpdGggYmFzZSBob3VzZSBlZGdlCiAgICAvLyBkeW5hbWljX2VkZ2UgPSBzZWxmLmJhc2VfaG91c2VfZWRnZV9icHMKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBzd2FwCiAgICBkdXAKICAgIGNvdmVyIDIKICAgIGZyYW1lX2J1cnkgMAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuYmFzZV9ob3VzZV9lZGdlX2JwcyBleGlzdHMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTkxLTE5OAogICAgLy8gIyBJZiBiZXQgaXMgc21hbGwgcmVsYXRpdmUgdG8gYSBoZWFsdGh5IGJhbGFuY2UsIGRlY3JlYXNlIGhvdXNlIGVkZ2UKICAgIC8vICMgaWYgcmlza19yYXRpbyA8IFVJbnQ2NCgxMDApOiAgIyBJZiBiZXQgaXMgbGVzcyB0aGFuIDElIG9mIGJhbGFuY2UKICAgIC8vICMgICAgICMgRGVjcmVhc2UgZWRnZSBieSB1cCB0byAyMCUgb2YgYmFzZSBlZGdlIHdoZW4gY29udHJhY3QgaXMgdmVyeSBoZWFsdGh5CiAgICAvLyAjICAgICBtYXhfcmVkdWN0aW9uID0gc2VsZi5iYXNlX2hvdXNlX2VkZ2VfYnBzIC8vIFVJbnQ2NCg1KQogICAgLy8gIyAgICAgZWRnZV9yZWR1Y3Rpb24gPSAoVUludDY0KDEwMCkgLSByaXNrX3JhdGlvKSAqIG1heF9yZWR1Y3Rpb24gLy8gVUludDY0KDEwMCkKICAgIC8vICMgICAgIGR5bmFtaWNfZWRnZSAtPSBlZGdlX3JlZHVjdGlvbgogICAgLy8gIyBJZiBiZXQgaXMgbGFyZ2UgcmVsYXRpdmUgdG8gYmFsYW5jZSwgaW5jcmVhc2UgaG91c2UgZWRnZQogICAgLy8gaWYgcmlza19yYXRpbyA+IFVJbnQ2NCgxMDAwKTogICMgSWYgYmV0IGlzIG1vcmUgdGhhbiAxMCUgb2YgYmFsYW5jZQogICAgc3dhcAogICAgaW50IDEwMDAKICAgID4KICAgIHN3YXAKICAgIGZyYW1lX2J1cnkgMQogICAgYnogX2dldF9keW5hbWljX2hvdXNlX2VkZ2VfYWZ0ZXJfaWZfZWxzZUA0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE5OQogICAgLy8gZWRnZV9pbmNyZWFzZSA9IChyaXNrX3JhdGlvIC0gVUludDY0KDEwMDApKSAvLyBVSW50NjQoMTAwKQogICAgZnJhbWVfZGlnIDIKICAgIGludCAxMDAwCiAgICAtCiAgICBpbnQgMTAwCiAgICAvCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjIwMAogICAgLy8gZHluYW1pY19lZGdlICs9IGVkZ2VfaW5jcmVhc2UKICAgIGZyYW1lX2RpZyAwCiAgICArCiAgICBmcmFtZV9idXJ5IDEKCl9nZXRfZHluYW1pY19ob3VzZV9lZGdlX2FmdGVyX2lmX2Vsc2VANDoKICAgIGZyYW1lX2RpZyAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjIwMi0yMDMKICAgIC8vICMgRW5zdXJlIGhvdXNlIGVkZ2Ugc3RheXMgd2l0aGluIGJvdW5kcwogICAgLy8gZHluYW1pY19lZGdlID0gc2VsZi5taW4oZHluYW1pY19lZGdlLCBzZWxmLm1heF9ob3VzZV9lZGdlX2JwcykKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojg3CiAgICAvLyBzZWxmLm1heF9ob3VzZV9lZGdlX2JwcyA9IFVJbnQ2NCg5MDAwKSAgIyA5MCUgbWF4aW11bSBlZGdlCiAgICBieXRlICJtYXhfaG91c2VfZWRnZV9icHMiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjIwMi0yMDMKICAgIC8vICMgRW5zdXJlIGhvdXNlIGVkZ2Ugc3RheXMgd2l0aGluIGJvdW5kcwogICAgLy8gZHluYW1pY19lZGdlID0gc2VsZi5taW4oZHluYW1pY19lZGdlLCBzZWxmLm1heF9ob3VzZV9lZGdlX2JwcykKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5tYXhfaG91c2VfZWRnZV9icHMgZXhpc3RzCiAgICBjYWxsc3ViIG1pbgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyMDQKICAgIC8vIGR5bmFtaWNfZWRnZSA9IHNlbGYubWF4KGR5bmFtaWNfZWRnZSwgc2VsZi5taW5faG91c2VfZWRnZV9icHMpCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4OAogICAgLy8gc2VsZi5taW5faG91c2VfZWRnZV9icHMgPSBVSW50NjQoMTAwMCkgICMgMTAlIG1pbmltdW0gZWRnZQogICAgYnl0ZSAibWluX2hvdXNlX2VkZ2VfYnBzIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyMDQKICAgIC8vIGR5bmFtaWNfZWRnZSA9IHNlbGYubWF4KGR5bmFtaWNfZWRnZSwgc2VsZi5taW5faG91c2VfZWRnZV9icHMpCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYubWluX2hvdXNlX2VkZ2VfYnBzIGV4aXN0cwogICAgY2FsbHN1YiBtYXgKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjA2CiAgICAvLyByZXR1cm4gZHluYW1pY19lZGdlCiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLm1pbihhOiB1aW50NjQsIGI6IHVpbnQ2NCkgLT4gdWludDY0OgptaW46CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0NS00NDYKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgbWluKHNlbGYsIGE6IFVJbnQ2NCwgYjogVUludDY0KSAtPiBVSW50NjQ6CiAgICBwcm90byAyIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQ3CiAgICAvLyByZXR1cm4gYSBpZiBhIDwgYiBlbHNlIGIKICAgIGZyYW1lX2RpZyAtMgogICAgZnJhbWVfZGlnIC0xCiAgICA8CiAgICBmcmFtZV9kaWcgLTEKICAgIGZyYW1lX2RpZyAtMgogICAgdW5jb3ZlciAyCiAgICBzZWxlY3QKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLm1heChhOiB1aW50NjQsIGI6IHVpbnQ2NCkgLT4gdWludDY0OgptYXg6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0OS00NTAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgbWF4KHNlbGYsIGE6IFVJbnQ2NCwgYjogVUludDY0KSAtPiBVSW50NjQ6CiAgICBwcm90byAyIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDUxCiAgICAvLyByZXR1cm4gYSBpZiBhID4gYiBlbHNlIGIKICAgIGZyYW1lX2RpZyAtMgogICAgZnJhbWVfZGlnIC0xCiAgICA+CiAgICBmcmFtZV9kaWcgLTEKICAgIGZyYW1lX2RpZyAtMgogICAgdW5jb3ZlciAyCiAgICBzZWxlY3QKICAgIHJldHN1YgoKCi8vIG9wZW5zdWJtYXJpbmUuY29udHJhY3RzLnVwZGF0ZS5VcGdyYWRlYWJsZS5jb250cmFjdC5VcGdyYWRlYWJsZS5zZXRfdmVyc2lvbihjb250cmFjdF92ZXJzaW9uOiBieXRlcywgZGVwbG95bWVudF92ZXJzaW9uOiBieXRlcykgLT4gdm9pZDoKc2V0X3ZlcnNpb246CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6ODMtODYKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHNldF92ZXJzaW9uKAogICAgLy8gICAgIHNlbGYsIGNvbnRyYWN0X3ZlcnNpb246IGFyYzQuVUludDY0LCBkZXBsb3ltZW50X3ZlcnNpb246IGFyYzQuVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICBwcm90byAyIDAKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTo4NwogICAgLy8gYXNzZXJ0IFR4bi5zZW5kZXIgPT0gc2VsZi51cGdyYWRlciwgIm11c3QgYmUgdXBncmFkZXIiCiAgICB0eG4gU2VuZGVyCiAgICBpbnQgMAogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjM0CiAgICAvLyBzZWxmLnVwZ3JhZGVyID0gQWNjb3VudCgpCiAgICBieXRlICJ1cGdyYWRlciIKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTo4NwogICAgLy8gYXNzZXJ0IFR4bi5zZW5kZXIgPT0gc2VsZi51cGdyYWRlciwgIm11c3QgYmUgdXBncmFkZXIiCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYudXBncmFkZXIgZXhpc3RzCiAgICA9PQogICAgYXNzZXJ0IC8vIG11c3QgYmUgdXBncmFkZXIKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTo4OAogICAgLy8gYXJjNC5lbWl0KFZlcnNpb25VcGRhdGVkKGNvbnRyYWN0X3ZlcnNpb24sIGRlcGxveW1lbnRfdmVyc2lvbikpCiAgICBmcmFtZV9kaWcgLTIKICAgIGZyYW1lX2RpZyAtMQogICAgY29uY2F0CiAgICBtZXRob2QgIlZlcnNpb25VcGRhdGVkKHVpbnQ2NCx1aW50NjQpIgogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTo4OQogICAgLy8gc2VsZi5jb250cmFjdF92ZXJzaW9uID0gY29udHJhY3RfdmVyc2lvbi5uYXRpdmUKICAgIGZyYW1lX2RpZyAtMgogICAgYnRvaQogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjMxCiAgICAvLyBzZWxmLmNvbnRyYWN0X3ZlcnNpb24gPSBVSW50NjQoKQogICAgYnl0ZSAiY29udHJhY3RfdmVyc2lvbiIKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTo4OQogICAgLy8gc2VsZi5jb250cmFjdF92ZXJzaW9uID0gY29udHJhY3RfdmVyc2lvbi5uYXRpdmUKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6OTAKICAgIC8vIHNlbGYuZGVwbG95bWVudF92ZXJzaW9uID0gZGVwbG95bWVudF92ZXJzaW9uLm5hdGl2ZQogICAgZnJhbWVfZGlnIC0xCiAgICBidG9pCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MzIKICAgIC8vIHNlbGYuZGVwbG95bWVudF92ZXJzaW9uID0gVUludDY0KCkKICAgIGJ5dGUgImRlcGxveW1lbnRfdmVyc2lvbiIKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTo5MAogICAgLy8gc2VsZi5kZXBsb3ltZW50X3ZlcnNpb24gPSBkZXBsb3ltZW50X3ZlcnNpb24ubmF0aXZlCiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgcmV0c3ViCgoKLy8gb3BlbnN1Ym1hcmluZS5jb250cmFjdHMudXBkYXRlLlVwZ3JhZGVhYmxlLmNvbnRyYWN0LlVwZ3JhZGVhYmxlLmFwcHJvdmVfdXBkYXRlKGFwcHJvdmFsOiBieXRlcykgLT4gdm9pZDoKYXBwcm92ZV91cGRhdGU6CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTAxLTEwMgogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgYXBwcm92ZV91cGRhdGUoc2VsZiwgYXBwcm92YWw6IGFyYzQuQm9vbCkgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjEwMwogICAgLy8gYXNzZXJ0IFR4bi5zZW5kZXIgPT0gc2VsZi5vd25lciwgIm11c3QgYmUgb3duZXIiCiAgICB0eG4gU2VuZGVyCiAgICBpbnQgMAogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvYWNjZXNzL093bmFibGUvY29udHJhY3QucHk6MjAKICAgIC8vIHNlbGYub3duZXIgPSBBY2NvdW50KCkKICAgIGJ5dGUgIm93bmVyIgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjEwMwogICAgLy8gYXNzZXJ0IFR4bi5zZW5kZXIgPT0gc2VsZi5vd25lciwgIm11c3QgYmUgb3duZXIiCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYub3duZXIgZXhpc3RzCiAgICA9PQogICAgYXNzZXJ0IC8vIG11c3QgYmUgb3duZXIKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weToxMDQKICAgIC8vIGFyYzQuZW1pdChVcGRhdGVBcHByb3ZlZChhcmM0LkFkZHJlc3Moc2VsZi5vd25lciksIGFwcHJvdmFsKSkKICAgIGludCAwCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy9hY2Nlc3MvT3duYWJsZS9jb250cmFjdC5weToyMAogICAgLy8gc2VsZi5vd25lciA9IEFjY291bnQoKQogICAgYnl0ZSAib3duZXIiCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTA0CiAgICAvLyBhcmM0LmVtaXQoVXBkYXRlQXBwcm92ZWQoYXJjNC5BZGRyZXNzKHNlbGYub3duZXIpLCBhcHByb3ZhbCkpCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYub3duZXIgZXhpc3RzCiAgICBmcmFtZV9kaWcgLTEKICAgIGNvbmNhdAogICAgbWV0aG9kICJVcGRhdGVBcHByb3ZlZChhZGRyZXNzLGJvb2wpIgogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weToxMDUKICAgIC8vIHNlbGYudXBkYXRhYmxlID0gYXBwcm92YWwubmF0aXZlCiAgICBmcmFtZV9kaWcgLTEKICAgIGludCAwCiAgICBnZXRiaXQKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTozMwogICAgLy8gc2VsZi51cGRhdGFibGUgPSBib29sKDEpCiAgICBieXRlICJ1cGRhdGFibGUiCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTA1CiAgICAvLyBzZWxmLnVwZGF0YWJsZSA9IGFwcHJvdmFsLm5hdGl2ZQogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIHJldHN1YgoKCi8vIG9wZW5zdWJtYXJpbmUuY29udHJhY3RzLnVwZGF0ZS5VcGdyYWRlYWJsZS5jb250cmFjdC5VcGdyYWRlYWJsZS5ncmFudF91cGdyYWRlcih1cGdyYWRlcjogYnl0ZXMpIC0+IHZvaWQ6CmdyYW50X3VwZ3JhZGVyOgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjEwNy0xMDgKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdyYW50X3VwZ3JhZGVyKHNlbGYsIHVwZ3JhZGVyOiBhcmM0LkFkZHJlc3MpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weToxMDkKICAgIC8vIGFzc2VydCBUeG4uc2VuZGVyID09IEdsb2JhbC5jcmVhdG9yX2FkZHJlc3MsICJtdXN0IGJlIGNyZWF0b3IiCiAgICB0eG4gU2VuZGVyCiAgICBnbG9iYWwgQ3JlYXRvckFkZHJlc3MKICAgID09CiAgICBhc3NlcnQgLy8gbXVzdCBiZSBjcmVhdG9yCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTEwCiAgICAvLyBhcmM0LmVtaXQoVXBncmFkZXJHcmFudGVkKGFyYzQuQWRkcmVzcyhzZWxmLnVwZ3JhZGVyKSwgdXBncmFkZXIpKQogICAgaW50IDAKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTozNAogICAgLy8gc2VsZi51cGdyYWRlciA9IEFjY291bnQoKQogICAgYnl0ZSAidXBncmFkZXIiCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTEwCiAgICAvLyBhcmM0LmVtaXQoVXBncmFkZXJHcmFudGVkKGFyYzQuQWRkcmVzcyhzZWxmLnVwZ3JhZGVyKSwgdXBncmFkZXIpKQogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnVwZ3JhZGVyIGV4aXN0cwogICAgZnJhbWVfZGlnIC0xCiAgICBjb25jYXQKICAgIG1ldGhvZCAiVXBncmFkZXJHcmFudGVkKGFkZHJlc3MsYWRkcmVzcykiCiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjM0CiAgICAvLyBzZWxmLnVwZ3JhZGVyID0gQWNjb3VudCgpCiAgICBieXRlICJ1cGdyYWRlciIKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weToxMTEKICAgIC8vIHNlbGYudXBncmFkZXIgPSB1cGdyYWRlci5uYXRpdmUKICAgIGZyYW1lX2RpZyAtMQogICAgYXBwX2dsb2JhbF9wdXQKICAgIHJldHN1YgoKCi8vIG9wZW5zdWJtYXJpbmUuY29udHJhY3RzLnVwZGF0ZS5VcGdyYWRlYWJsZS5jb250cmFjdC5VcGdyYWRlYWJsZS5vbl91cGRhdGUoKSAtPiB2b2lkOgpvbl91cGRhdGU6CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6OTItOTMKICAgIC8vIEBhcmM0LmJhcmVtZXRob2QoYWxsb3dfYWN0aW9ucz1bIlVwZGF0ZUFwcGxpY2F0aW9uIl0pCiAgICAvLyBkZWYgb25fdXBkYXRlKHNlbGYpIC0+IE5vbmU6CiAgICBwcm90byAwIDAKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTo5NC05NwogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAjIFdBUk5JTkc6IFRoaXMgYXBwIGNhbiBiZSB1cGRhdGVkIGJ5IHRoZSBjcmVhdG9yCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vIGFzc2VydCBUeG4uc2VuZGVyID09IHNlbGYudXBncmFkZXIsICJtdXN0IGJlIHVwZ3JhZGVyIgogICAgdHhuIFNlbmRlcgogICAgaW50IDAKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTozNAogICAgLy8gc2VsZi51cGdyYWRlciA9IEFjY291bnQoKQogICAgYnl0ZSAidXBncmFkZXIiCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6OTQtOTcKICAgIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgLy8gIyBXQVJOSU5HOiBUaGlzIGFwcCBjYW4gYmUgdXBkYXRlZCBieSB0aGUgY3JlYXRvcgogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyBhc3NlcnQgVHhuLnNlbmRlciA9PSBzZWxmLnVwZ3JhZGVyLCAibXVzdCBiZSB1cGdyYWRlciIKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi51cGdyYWRlciBleGlzdHMKICAgID09CiAgICBhc3NlcnQgLy8gbXVzdCBiZSB1cGdyYWRlcgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5Ojk4CiAgICAvLyBhc3NlcnQgc2VsZi51cGRhdGFibGUgPT0gVUludDY0KDEpLCAibm90IGFwcHJvdmVkIgogICAgaW50IDAKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTozMwogICAgLy8gc2VsZi51cGRhdGFibGUgPSBib29sKDEpCiAgICBieXRlICJ1cGRhdGFibGUiCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6OTgKICAgIC8vIGFzc2VydCBzZWxmLnVwZGF0YWJsZSA9PSBVSW50NjQoMSksICJub3QgYXBwcm92ZWQiCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYudXBkYXRhYmxlIGV4aXN0cwogICAgaW50IDEKICAgID09CiAgICBhc3NlcnQgLy8gbm90IGFwcHJvdmVkCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fX2luaXRfXygpIC0+IHZvaWQ6Cl9faW5pdF9fOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo3MgogICAgLy8gZGVmIF9faW5pdF9fKHNlbGYpIC0+IE5vbmU6CiAgICBwcm90byAwIDAKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL2FjY2Vzcy9Pd25hYmxlL2NvbnRyYWN0LnB5OjIwCiAgICAvLyBzZWxmLm93bmVyID0gQWNjb3VudCgpCiAgICBieXRlICJvd25lciIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NzMtNzQKICAgIC8vICMgb3duYWJsZSBzdGF0ZQogICAgLy8gc2VsZi5vd25lciA9IEdsb2JhbC5jcmVhdG9yX2FkZHJlc3MgICMgc2V0IG93bmVyIHRvIGNyZWF0b3IKICAgIGdsb2JhbCBDcmVhdG9yQWRkcmVzcwogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTozMQogICAgLy8gc2VsZi5jb250cmFjdF92ZXJzaW9uID0gVUludDY0KCkKICAgIGJ5dGUgImNvbnRyYWN0X3ZlcnNpb24iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojc1LTc2CiAgICAvLyAjIHVwZ3JhZGFibGUgc3RhdGUKICAgIC8vIHNlbGYuY29udHJhY3RfdmVyc2lvbiA9IFVJbnQ2NChDT05UUkFDVF9WRVJTSU9OKQogICAgaW50IDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MzIKICAgIC8vIHNlbGYuZGVwbG95bWVudF92ZXJzaW9uID0gVUludDY0KCkKICAgIGJ5dGUgImRlcGxveW1lbnRfdmVyc2lvbiIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NzcKICAgIC8vIHNlbGYuZGVwbG95bWVudF92ZXJzaW9uID0gVUludDY0KERFUExPWU1FTlRfVkVSU0lPTikKICAgIGludCAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjMzCiAgICAvLyBzZWxmLnVwZGF0YWJsZSA9IGJvb2woMSkKICAgIGJ5dGUgInVwZGF0YWJsZSIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NzgKICAgIC8vIHNlbGYudXBkYXRhYmxlID0gYm9vbCgxKQogICAgaW50IDEKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MzQKICAgIC8vIHNlbGYudXBncmFkZXIgPSBBY2NvdW50KCkKICAgIGJ5dGUgInVwZ3JhZGVyIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo3OQogICAgLy8gc2VsZi51cGdyYWRlciA9IEdsb2JhbC5jcmVhdG9yX2FkZHJlc3MKICAgIGdsb2JhbCBDcmVhdG9yQWRkcmVzcwogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODAtODEKICAgIC8vICMgc2xvdCBtYWNoaW5lIHN0YXRlCiAgICAvLyBzZWxmLmJhbGFuY2VfdG90YWwgPSBVSW50NjQoKQogICAgYnl0ZSAiYmFsYW5jZV90b3RhbCIKICAgIGludCAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4MgogICAgLy8gc2VsZi5iYWxhbmNlX2F2YWlsYWJsZSA9IFVJbnQ2NCgpCiAgICBieXRlICJiYWxhbmNlX2F2YWlsYWJsZSIKICAgIGludCAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4MwogICAgLy8gc2VsZi5iYWxhbmNlX2xvY2tlZCA9IFVJbnQ2NCgpCiAgICBieXRlICJiYWxhbmNlX2xvY2tlZCIKICAgIGludCAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4NS04NgogICAgLy8gIyBEZWZpbmUgYmFzZSBhbmQgbWF4IGhvdXNlIGVkZ2UKICAgIC8vIHNlbGYuYmFzZV9ob3VzZV9lZGdlX2JwcyA9IFVJbnQ2NCg3MDAwKSAgIyA3MCUgYmFzZSBlZGdlIChkZWZhdWx0IDU2LjQxJSkKICAgIGJ5dGUgImJhc2VfaG91c2VfZWRnZV9icHMiCiAgICBpbnQgNzAwMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODcKICAgIC8vIHNlbGYubWF4X2hvdXNlX2VkZ2VfYnBzID0gVUludDY0KDkwMDApICAjIDkwJSBtYXhpbXVtIGVkZ2UKICAgIGJ5dGUgIm1heF9ob3VzZV9lZGdlX2JwcyIKICAgIGludCA5MDAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4OAogICAgLy8gc2VsZi5taW5faG91c2VfZWRnZV9icHMgPSBVSW50NjQoMTAwMCkgICMgMTAlIG1pbmltdW0gZWRnZQogICAgYnl0ZSAibWluX2hvdXNlX2VkZ2VfYnBzIgogICAgaW50IDEwMDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojg5CiAgICAvLyBzZWxmLm1pbl9iZXRfYW1vdW50ID0gVUludDY0KDEwMDAwMDApICAjIDEgVk9JCiAgICBieXRlICJtaW5fYmV0X2Ftb3VudCIKICAgIGludCAxMDAwMDAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgcmV0c3ViCg==",
        "clear": "I3ByYWdtYSB2ZXJzaW9uIDEwCgpjb250cmFjdC5TbG90TWFjaGluZS5jbGVhcl9zdGF0ZV9wcm9ncmFtOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2NwogICAgLy8gY2xhc3MgU2xvdE1hY2hpbmUoVXBncmFkZWFibGUpOgogICAgaW50IDEKICAgIHJldHVybgo="
    },
    "state": {
        "global": {
            "num_byte_slices": 2,
            "num_uints": 10
        },
        "local": {
            "num_byte_slices": 0,
            "num_uints": 0
        }
    },
    "schema": {
        "global": {
            "declared": {
                "balance_available": {
                    "type": "uint64",
                    "key": "balance_available"
                },
                "balance_locked": {
                    "type": "uint64",
                    "key": "balance_locked"
                },
                "balance_total": {
                    "type": "uint64",
                    "key": "balance_total"
                },
                "base_house_edge_bps": {
                    "type": "uint64",
                    "key": "base_house_edge_bps"
                },
                "contract_version": {
                    "type": "uint64",
                    "key": "contract_version"
                },
                "deployment_version": {
                    "type": "uint64",
                    "key": "deployment_version"
                },
                "max_house_edge_bps": {
                    "type": "uint64",
                    "key": "max_house_edge_bps"
                },
                "min_bet_amount": {
                    "type": "uint64",
                    "key": "min_bet_amount"
                },
                "min_house_edge_bps": {
                    "type": "uint64",
                    "key": "min_house_edge_bps"
                },
                "owner": {
                    "type": "bytes",
                    "key": "owner"
                },
                "updatable": {
                    "type": "uint64",
                    "key": "updatable"
                },
                "upgrader": {
                    "type": "bytes",
                    "key": "upgrader"
                }
            },
            "reserved": {}
        },
        "local": {
            "declared": {},
            "reserved": {}
        }
    },
    "contract": {
        "name": "SlotMachine",
        "desc": "\n    A simple slot machine smart contract\n    ",
        "methods": [
            {
                "name": "post_upgrade",
                "args": [],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Called after upgrade"
            },
            {
                "name": "get_block_seed",
                "args": [
                    {
                        "type": "uint64",
                        "name": "round"
                    }
                ],
                "readonly": true,
                "returns": {
                    "type": "byte[32]"
                }
            },
            {
                "name": "deposit",
                "args": [],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Deposit funds into the contract"
            },
            {
                "name": "withdraw",
                "args": [
                    {
                        "type": "uint64",
                        "name": "amount",
                        "desc": "The amount of funds to withdraw in atomic units"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Withdraw funds from the contract\nOnly callable by contract owner"
            },
            {
                "name": "get_bet_key",
                "args": [
                    {
                        "type": "address",
                        "name": "address"
                    },
                    {
                        "type": "uint64",
                        "name": "amount"
                    },
                    {
                        "type": "uint64",
                        "name": "round"
                    },
                    {
                        "type": "uint64",
                        "name": "index"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "byte[56]"
                }
            },
            {
                "name": "get_max_bet",
                "args": [],
                "readonly": false,
                "returns": {
                    "type": "uint64"
                },
                "desc": "Get the maximum bet amount"
            },
            {
                "name": "spin",
                "args": [
                    {
                        "type": "uint64",
                        "name": "bet_amount"
                    },
                    {
                        "type": "uint64",
                        "name": "index",
                        "desc": "Used to determine which 8 bytes of the block seed to use."
                    },
                    {
                        "type": "uint64",
                        "name": "future_round_offset"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "byte[56]",
                    "desc": "r (uint): The round number of the spin."
                },
                "desc": "Spin the slot machine. Outcome is determined by the seed\nof future round."
            },
            {
                "name": "claim",
                "args": [
                    {
                        "type": "byte[56]",
                        "name": "bet_key",
                        "desc": "The key of the bet to claim"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "uint64",
                    "desc": "The payout for the bet"
                },
                "desc": "Claim a bet"
            },
            {
                "name": "set_version",
                "args": [
                    {
                        "type": "uint64",
                        "name": "contract_version"
                    },
                    {
                        "type": "uint64",
                        "name": "deployment_version"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                }
            },
            {
                "name": "approve_update",
                "args": [
                    {
                        "type": "bool",
                        "name": "approval"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                }
            },
            {
                "name": "grant_upgrader",
                "args": [
                    {
                        "type": "address",
                        "name": "upgrader"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                }
            },
            {
                "name": "transfer",
                "args": [
                    {
                        "type": "address",
                        "name": "new_owner"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Transfer ownership of the contract to a new owner. Emits OwnershipTransferred event."
            }
        ],
        "networks": {}
    },
    "bare_call_config": {
        "update_application": "CALL",
        "no_op": "CREATE"
    }
}